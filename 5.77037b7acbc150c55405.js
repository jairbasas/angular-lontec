(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{CgeX:function(e,t,n){"use strict";n.r(t),n.d(t,"CustomerModule",function(){return _});var i=n("NdbC"),r=n("iInd"),o=n("36fG"),a=n("cp0P"),s=n("s7LF"),c=n("Ez0L"),b=n("8Y7J"),l=n("NFMk"),m=n("JXeA"),u=n("vU8h"),d=n("nsZx"),z=n("fXYU"),h=n("wf2+"),p=n("fb/r"),T=n("tYkK"),f=n("px0D"),g=n("jTf7"),S=n("SVse"),C=n("GaVp"),E=n("Jp/u"),A=n("WJhm");function U(e,t){1&e&&(b.Sb(0),b.Hc(1," Campo obligatorio. "),b.Rb())}function v(e,t){1&e&&(b.Sb(0),b.Hc(1," RUC formato incorrecto. "),b.Rb())}function I(e,t){if(1&e&&(b.Fc(0,U,2,0,"ng-container",19),b.Fc(1,v,2,0,"ng-container",19)),2&e){const e=t.$implicit;b.mc("ngIf",e.hasError("required")),b.Ab(1),b.mc("ngIf",!e.hasError("required")&&e.hasError("validateRUC"))}}function P(e,t){if(1&e&&b.Pb(0,"nz-option",20),2&e){const e=t.$implicit;b.mc("nzValue",e.parameterDetailId)("nzLabel",e.fieldValue1)}}function R(e,t){if(1&e&&b.Pb(0,"nz-option",20),2&e){const e=t.$implicit;b.mc("nzValue",e.headquarterId)("nzLabel",e.headquarterName)}}function y(e,t){if(1&e){const e=b.Vb();b.Ub(0,"div"),b.Ub(1,"button",21),b.bc("click",function(){return b.vc(e),b.ec().onCancel()}),b.Hc(2,"Cancelar"),b.Tb(),b.Ub(3,"button",22),b.bc("click",function(){return b.vc(e),b.ec().onSubmit()}),b.Hc(4,"Guardar"),b.Tb(),b.Tb()}if(2&e){const e=b.ec();b.Ab(3),b.mc("nzLoading",e.loadingSubmit)}}let L=(()=>{class e{constructor(e,t,n,i,r,a){this.fb=e,this.modalRef=t,this.messageService=n,this.modalMessage=i,this.lontecService=r,this.formValidator=a,this.state=o.a.STATE_ENTITY.ENABLE,this.customerTypeList=[],this.headquarterList=[],this.loadingSubmit=!1,this.loadingSping=!1}ngOnInit(){this.initForm(),this.initList()}initForm(){this.frmCustomerEdit=this.fb.group({ruc:[null,[s.q.required,this.formValidator.validateRUC]],businessname:[null,[s.q.required,this.formValidator.espacionBlanco]],tradename:[null],ddlcustomertype:[null,[s.q.required]],ddlheadquarter:[null]})}initList(){Object(a.a)([this.lontecService.getParameterDetailSearch({parameterId:o.a.PARAMETERS.CUSTOMER_TYPE}),this.lontecService.getHeadquarterSearch({state:o.a.STATE_ENTITY.ENABLE})]).subscribe(e=>{this.customerTypeList=e[0],this.headquarterList=e[1]},e=>{this.modalMessage.error(o.a.MESSAGE.ERROR_GET_DATA)},()=>{void 0!==this.customerId&&this.onSearch()})}onSearch(){this.loadingSping=!0,this.lontecService.getCustomerById(this.customerId).subscribe(e=>{var t,n,i,r,o;null===(t=this.frmCustomerEdit.get("businessname"))||void 0===t||t.setValue(e.businessName),null===(n=this.frmCustomerEdit.get("ruc"))||void 0===n||n.setValue(e.ruc),null===(i=this.frmCustomerEdit.get("tradename"))||void 0===i||i.setValue(e.tradename),null===(r=this.frmCustomerEdit.get("ddlcustomertype"))||void 0===r||r.setValue(e.customerTypeId),null===(o=this.frmCustomerEdit.get("ddlheadquarter"))||void 0===o||o.setValue(e.headquarterId),this.state=Number(e.state),this.loadingSping=!1},e=>{this.loadingSping=!1,this.modalMessage.error(o.a.MESSAGE.ERROR_GET_DATA)})}setCommand(){return{customerId:this.customerId,businessName:this.frmCustomerEdit.value.businessname,tradename:this.frmCustomerEdit.value.tradename,ruc:this.frmCustomerEdit.value.ruc,state:this.state,headquarterId:this.frmCustomerEdit.value.ddlheadquarter,customerTypeId:this.frmCustomerEdit.value.ddlcustomertype,registerUserId:Object(c.d)(),registerUserFullname:Object(c.c)()}}onCancel(){this.modalRef.destroy({refresh:!1})}onSubmit(){Object(c.j)(this.frmCustomerEdit)?this.modalMessage.confirm(o.a.MESSAGE.CONFIRM_QUESTION,()=>{this.loadingSubmit=!0,this.lontecService.postCustomer(this.setCommand()).subscribe(()=>{this.loadingSubmit=!1,this.messageService.success(o.a.MESSAGE.SUCCESS_SAVE),this.modalRef.destroy({refresh:!0})},e=>{this.loadingSubmit=!1,this.modalMessage.error(o.a.MESSAGE.ERROR)})}):this.messageService.warning(o.a.MESSAGE.COMPLETE_FORM)}}return e.\u0275fac=function(t){return new(t||e)(b.Ob(s.e),b.Ob(l.c),b.Ob(m.e),b.Ob(u.a),b.Ob(d.a),b.Ob(z.a))},e.\u0275cmp=b.Ib({type:e,selectors:[["app-customer-edit"]],inputs:{customerId:"customerId"},decls:41,vars:15,consts:[["nz-form","","nzLayout","vertical",3,"formGroup"],[3,"nzSpinning"],["nz-row",""],["nz-col","",3,"nzSm","nzXs"],["nzRequired","","nzFor","ruc"],[3,"nzErrorTip"],["nz-input","","formControlName","ruc","placeholder","RUC"],["customValidatorRuc",""],["nzRequired","","nzFor","businessname"],["nzErrorTip","Campo obligatorio."],["nz-input","","formControlName","businessname","placeholder","Raz\xf3n Social"],["nzFor","tradename"],["nz-input","","formControlName","tradename","placeholder","Nombre Comercial"],["nzRequired","","nzFor","customertype"],["nzShowSearch","","formControlName","ddlcustomertype","nzPlaceHolder","Tipo Cliente"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzFor","headquarter"],["nzShowSearch","","nzAllowClear","","formControlName","ddlheadquarter","nzPlaceHolder","Sede"],[4,"nzModalFooter"],[4,"ngIf"],[3,"nzValue","nzLabel"],["nz-button","","nzType","primary","nzDanger","",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(e,t){if(1&e&&(b.Ub(0,"form",0),b.Ub(1,"nz-spin",1),b.Ub(2,"div",2),b.Ub(3,"div",3),b.Ub(4,"nz-form-item"),b.Ub(5,"nz-form-label",4),b.Hc(6,"RUC"),b.Tb(),b.Ub(7,"nz-form-control",5),b.Pb(8,"input",6),b.Fc(9,I,2,2,"ng-template",null,7,b.Gc),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(11,"div",2),b.Ub(12,"div",3),b.Ub(13,"nz-form-item"),b.Ub(14,"nz-form-label",8),b.Hc(15,"Raz\xf3n Social"),b.Tb(),b.Ub(16,"nz-form-control",9),b.Pb(17,"input",10),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(18,"div",2),b.Ub(19,"div",3),b.Ub(20,"nz-form-item"),b.Ub(21,"nz-form-label",11),b.Hc(22,"Nombre Comercial"),b.Tb(),b.Ub(23,"nz-form-control",9),b.Pb(24,"input",12),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(25,"div",2),b.Ub(26,"div",3),b.Ub(27,"nz-form-item"),b.Ub(28,"nz-form-label",13),b.Hc(29,"Tipo Cliente"),b.Tb(),b.Ub(30,"nz-form-control",9),b.Ub(31,"nz-select",14),b.Fc(32,P,1,2,"nz-option",15),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(33,"div",3),b.Ub(34,"nz-form-item"),b.Ub(35,"nz-form-label",16),b.Hc(36,"Sede"),b.Tb(),b.Ub(37,"nz-form-control",9),b.Ub(38,"nz-select",17),b.Fc(39,R,1,2,"nz-option",15),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Fc(40,y,5,1,"div",18)),2&e){const e=b.uc(10);b.mc("formGroup",t.frmCustomerEdit),b.Ab(1),b.mc("nzSpinning",t.loadingSping),b.Ab(2),b.mc("nzSm",12)("nzXs",12),b.Ab(4),b.mc("nzErrorTip",e),b.Ab(5),b.mc("nzSm",24)("nzXs",24),b.Ab(7),b.mc("nzSm",24)("nzXs",24),b.Ab(7),b.mc("nzSm",12)("nzXs",12),b.Ab(6),b.mc("ngForOf",t.customerTypeList),b.Ab(1),b.mc("nzSm",12)("nzXs",12),b.Ab(6),b.mc("ngForOf",t.headquarterList)}},directives:[s.r,s.n,h.b,s.i,p.a,T.c,T.a,h.c,h.d,h.a,f.b,s.d,s.m,s.h,g.d,S.m,l.a,S.n,g.a,C.a,E.a,A.a],styles:[""]}),e})();var F=n("YdS3"),O=n("66zS"),N=n("haRT"),M=n("W4B1");function H(e,t){if(1&e&&b.Pb(0,"nz-option",20),2&e){const e=t.$implicit;b.mc("nzValue",e.parameterDetailId)("nzLabel",e.fieldValue1)}}function q(e,t){1&e&&(b.Ub(0,"button",26),b.Pb(1,"i",27),b.Tb())}function G(e,t){1&e&&(b.Ub(0,"button",28),b.Pb(1,"i",29),b.Tb())}function V(e,t){if(1&e){const e=b.Vb();b.Ub(0,"tr"),b.Ub(1,"td",21),b.Hc(2),b.Tb(),b.Ub(3,"td",21),b.Hc(4),b.Tb(),b.Ub(5,"td",21),b.Hc(6),b.Tb(),b.Ub(7,"td",21),b.Hc(8),b.Tb(),b.Ub(9,"td",21),b.Hc(10),b.Tb(),b.Ub(11,"td",21),b.Ub(12,"button",22),b.bc("click",function(){b.vc(e);const n=t.$implicit;return b.ec().onOpenCustomerEditModal(n.customerId)}),b.Pb(13,"i",23),b.Tb(),b.Tb(),b.Ub(14,"td",21),b.Fc(15,q,2,0,"button",24),b.Tb(),b.Ub(16,"td",21),b.Fc(17,G,2,0,"button",25),b.Tb(),b.Tb()}if(2&e){const e=t.$implicit,n=b.ec();b.Ab(2),b.Ic(e.businessName),b.Ab(2),b.Ic(e.tradename),b.Ab(2),b.Ic(e.ruc),b.Ab(2),b.Ic(e.headquarterName),b.Ab(2),b.Ic(e.stateName),b.Ab(5),b.mc("ngIf",n.state!==e.state),b.Ab(2),b.mc("ngIf",n.state===e.state)}}const w=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.fb=e,this.modalMessage=t,this.modalService=n,this.lontecService=i,this.stateList=[],this.state=o.a.STATE_ENTITY.ENABLE,this.pageIndex=o.a.PAGINATION.PAGE_INDEX,this.pageSize=o.a.PAGINATION.PAGE_SIZE,this.sortProperty="",this.sortPropertyName="",this.totalRecord=0,this.tableCustomerLoading=!1,this.tableCustomer=[]}ngOnInit(){this.initForm(),this.initList()}initForm(){this.frmCustomer=this.fb.group({businessname:[null],ddlstate:[null]})}initList(){Object(a.a)([this.lontecService.getParameterDetailSearch({parameterId:o.a.PARAMETERS.ENTITY_STATE})]).subscribe(e=>{this.stateList=e[0]},e=>{this.modalMessage.error(o.a.MESSAGE.ERROR_GET_DATA)},()=>{this.onSearch()})}onSearch(){let e=null===this.frmCustomer.value.businessname?"":this.frmCustomer.value.businessname,t=null===this.frmCustomer.controls.ddlstate.value?0:this.frmCustomer.controls.ddlstate.value;this.tableCustomerLoading=!0,this.lontecService.getCustomerFindAll({businessName:e,state:t,PageIndex:this.pageIndex,PageSize:this.pageSize,sort:this.sortProperty}).subscribe(e=>{this.tableCustomer=e.items,this.totalRecord=e.pagination.total,this.tableCustomerLoading=!1},e=>{this.tableCustomerLoading=!1,this.modalMessage.error(o.a.MESSAGE.ERROR_GET_DATA)})}onQueryParamsChange(e){const{pageSize:t,pageIndex:n,sort:i}=e;let r;this.pageIndex=n,this.pageSize=t,null!==i[0].value&&("ascend"==i[0].value&&(r="ASC"),"descend"==i[0].value&&(r="DESC"),"businessname"===i[0].key&&(this.sortProperty="business_name "+r)),this.onSearch()}onOpenCustomerEditModal(e){this.modalService.create({nzTitle:o.a.MODAL_TITLE.REGISTER_CUSTOMER,nzClosable:!1,nzContent:L,nzComponentParams:{customerId:e}}).afterClose.subscribe(e=>{e.refresh&&this.onSearch()})}}return e.\u0275fac=function(t){return new(t||e)(b.Ob(s.e),b.Ob(u.a),b.Ob(l.d),b.Ob(d.a))},e.\u0275cmp=b.Ib({type:e,selectors:[["app-customer"]],decls:44,vars:27,consts:[["nz-form","","nzLayout","vertical",3,"formGroup"],["nzTitle","Clientes"],["nz-row",""],["nz-col","",3,"nzSm","nzXs"],["nzFor","businessname"],["nz-input","","formControlName","businessname","placeholder","Raz\xf3n Social"],["nzFor","ddlstate"],["nzShowSearch","","nzAllowClear","","formControlName","ddlstate","nzPlaceHolder","Estados"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[1,"text-right"],["nz-button","","nzType","primary",2,"margin-left","5px","margin-right","5px",3,"click"],["nz-icon","","nzType","plus"],["nz-button","","nzType","default",2,"margin-left","5px","margin-right","9px",3,"click"],["nz-icon","","nzType","search"],["nz-row","",1,"ant-form-item","mt-15"],["nzSize","small","nzShowSizeChanger","",3,"nzFrontPagination","nzLoading","nzData","nzTotal","nzPageIndex","nzPageSize","nzPageIndexChange","nzPageSizeChange","nzQueryParams"],["nzColumnKey","businessname",1,"tr-color",3,"nzAlign","nzSortFn"],[1,"tr-color",3,"nzAlign"],[1,"tr-color",3,"nzAlign","nzWidth"],[4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],["nzAlign","center"],["nz-button","","nzType","primary","nzTooltipTitle","Editar","nzTooltipPlacement","topLeft","nz-tooltip","",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-button","","nzTooltipTitle","Habilitar","nzTooltipPlacement","topLeft","nz-tooltip","",4,"ngIf"],["nz-button","","nzTooltipTitle","Deshabilitar","nzTooltipPlacement","topLeft","nz-tooltip","","nzDanger","",4,"ngIf"],["nz-button","","nzTooltipTitle","Habilitar","nzTooltipPlacement","topLeft","nz-tooltip",""],["nz-icon","","nzType","like","nzTheme","outline"],["nz-button","","nzTooltipTitle","Deshabilitar","nzTooltipPlacement","topLeft","nz-tooltip","","nzDanger",""],["nz-icon","","nzType","dislike","nzTheme","outline"]],template:function(e,t){1&e&&(b.Ub(0,"form",0),b.Ub(1,"nz-card",1),b.Ub(2,"div",2),b.Ub(3,"div",3),b.Ub(4,"nz-form-item"),b.Ub(5,"nz-form-label",4),b.Hc(6,"Raz\xf3n Social"),b.Tb(),b.Ub(7,"nz-form-control"),b.Pb(8,"input",5),b.Tb(),b.Tb(),b.Tb(),b.Ub(9,"div",3),b.Ub(10,"nz-form-item"),b.Ub(11,"nz-form-label",6),b.Hc(12,"Estado"),b.Tb(),b.Ub(13,"nz-form-control"),b.Ub(14,"nz-select",7),b.Fc(15,H,1,2,"nz-option",8),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(16,"div",2),b.Ub(17,"div",3),b.Ub(18,"div",9),b.Ub(19,"button",10),b.bc("click",function(){return t.onOpenCustomerEditModal()}),b.Pb(20,"i",11),b.Hc(21," Nuevo"),b.Tb(),b.Ub(22,"button",12),b.bc("click",function(){return t.onSearch()}),b.Pb(23,"i",13),b.Hc(24,"Buscar"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(25,"div",14),b.Ub(26,"nz-table",15),b.bc("nzPageIndexChange",function(e){return t.pageIndex=e})("nzPageSizeChange",function(e){return t.pageSize=e})("nzQueryParams",function(e){return t.onQueryParamsChange(e)}),b.Ub(27,"thead"),b.Ub(28,"tr"),b.Ub(29,"th",16),b.Hc(30,"Raz\xf3n Social"),b.Tb(),b.Ub(31,"th",17),b.Hc(32,"Nombre Comercial"),b.Tb(),b.Ub(33,"th",17),b.Hc(34,"RUC"),b.Tb(),b.Ub(35,"th",17),b.Hc(36,"Sede"),b.Tb(),b.Ub(37,"th",17),b.Hc(38,"Estado"),b.Tb(),b.Pb(39,"th",18),b.Pb(40,"th",18),b.Pb(41,"th",18),b.Tb(),b.Tb(),b.Ub(42,"tbody"),b.Fc(43,V,18,7,"tr",19),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb()),2&e&&(b.mc("formGroup",t.frmCustomer),b.Ab(3),b.mc("nzSm",8)("nzXs",24),b.Ab(6),b.mc("nzSm",8)("nzXs",24),b.Ab(6),b.mc("ngForOf",t.stateList),b.Ab(2),b.mc("nzSm",24)("nzXs",24),b.Ab(9),b.mc("nzFrontPagination",!1)("nzLoading",t.tableCustomerLoading)("nzData",t.tableCustomer)("nzTotal",t.totalRecord)("nzPageIndex",t.pageIndex)("nzPageSize",t.pageSize),b.Ab(3),b.mc("nzAlign","center")("nzSortFn",!0),b.Ab(2),b.mc("nzAlign","center"),b.Ab(2),b.mc("nzAlign","center"),b.Ab(2),b.mc("nzAlign","center"),b.Ab(2),b.mc("nzAlign","center"),b.Ab(2),b.mc("nzAlign","center")("nzWidth","20px"),b.Ab(1),b.mc("nzAlign","center")("nzWidth","20px"),b.Ab(1),b.mc("nzAlign","center")("nzWidth","20px"),b.Ab(2),b.mc("ngForOf",t.tableCustomer))},directives:[s.r,s.n,h.b,s.i,F.a,T.c,T.a,h.c,h.d,h.a,f.b,s.d,s.m,s.h,g.d,S.m,C.a,E.a,A.a,O.a,N.c,N.j,N.k,N.b,N.i,N.h,N.a,N.f,g.a,M.d,S.n],styles:[""]}),e})()}];let x=(()=>{class e{}return e.\u0275mod=b.Mb({type:e}),e.\u0275inj=b.Lb({factory:function(t){return new(t||e)},imports:[[r.g.forChild(w)],r.g]}),e})(),_=(()=>{class e{}return e.\u0275mod=b.Mb({type:e}),e.\u0275inj=b.Lb({factory:function(t){return new(t||e)},imports:[[i.a,x]]}),e})()}}]);