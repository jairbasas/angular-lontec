(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"4ZtX":function(e,n,t){"use strict";t.r(n),t.d(n,"ProviderModule",function(){return w});var i=t("NdbC"),r=t("iInd"),o=t("36fG"),a=t("cp0P"),s=t("s7LF"),b=t("Ez0L"),c=t("8Y7J"),l=t("NFMk"),d=t("JXeA"),m=t("vU8h"),z=t("nsZx"),u=t("fXYU"),h=t("wf2+"),p=t("fb/r"),f=t("tYkK"),g=t("px0D"),T=t("SVse"),v=t("GaVp"),S=t("Jp/u"),P=t("WJhm");function E(e,n){1&e&&(c.Sb(0),c.Hc(1," Campo obligatorio. "),c.Rb())}function A(e,n){1&e&&(c.Sb(0),c.Hc(1," RUC formato incorrecto. "),c.Rb())}function U(e,n){if(1&e&&(c.Fc(0,E,2,0,"ng-container",14),c.Fc(1,A,2,0,"ng-container",14)),2&e){const e=n.$implicit;c.mc("ngIf",e.hasError("required")),c.Ab(1),c.mc("ngIf",!e.hasError("required")&&e.hasError("validateRUC"))}}function I(e,n){if(1&e){const e=c.Vb();c.Ub(0,"div"),c.Ub(1,"button",15),c.bc("click",function(){return c.vc(e),c.ec().onCancel()}),c.Hc(2,"Cancelar"),c.Tb(),c.Ub(3,"button",16),c.bc("click",function(){return c.vc(e),c.ec().onSubmit()}),c.Hc(4,"Guardar"),c.Tb(),c.Tb()}if(2&e){const e=c.ec();c.Ab(3),c.mc("nzLoading",e.loadingSubmit)}}let R=(()=>{class e{constructor(e,n,t,i,r,a){this.fb=e,this.modalRef=n,this.messageService=t,this.modalMessage=i,this.lontecService=r,this.formValidator=a,this.state=o.a.STATE_ENTITY.ENABLE,this.loadingSubmit=!1,this.loadingSping=!1}ngOnInit(){this.initForm(),void 0!==this.providerId&&this.onSearch()}initForm(){this.frmProviderEdit=this.fb.group({ruc:[null,[s.q.required,this.formValidator.validateRUC]],businessname:[null,[s.q.required,this.formValidator.espacionBlanco]],tradename:[null]})}onSearch(){this.loadingSping=!0,this.lontecService.getProviderById(this.providerId).subscribe(e=>{var n,t,i;null===(n=this.frmProviderEdit.get("ruc"))||void 0===n||n.setValue(e.ruc),null===(t=this.frmProviderEdit.get("businessname"))||void 0===t||t.setValue(e.businessName),null===(i=this.frmProviderEdit.get("tradename"))||void 0===i||i.setValue(e.tradename),this.state=Number(e.state),this.loadingSping=!1},e=>{this.loadingSping=!1,this.modalMessage.error(o.a.MESSAGE.ERROR_GET_DATA)})}setCommand(){return{providerId:this.providerId,businessName:this.frmProviderEdit.value.businessname,tradename:this.frmProviderEdit.value.tradename,ruc:this.frmProviderEdit.value.ruc,state:this.state,registerUserId:Object(b.d)(),registerUserFullname:Object(b.c)()}}onCancel(){this.modalRef.destroy({refresh:!1})}onSubmit(){Object(b.j)(this.frmProviderEdit)?this.modalMessage.confirm(o.a.MESSAGE.CONFIRM_QUESTION,()=>{this.loadingSubmit=!0,this.lontecService.postProvider(this.setCommand()).subscribe(()=>{this.loadingSubmit=!1,this.messageService.success(o.a.MESSAGE.SUCCESS_SAVE),this.modalRef.destroy({refresh:!0})},e=>{this.loadingSubmit=!1,this.modalMessage.error(o.a.MESSAGE.ERROR)})}):this.messageService.warning(o.a.MESSAGE.COMPLETE_FORM)}}return e.\u0275fac=function(n){return new(n||e)(c.Ob(s.e),c.Ob(l.c),c.Ob(d.e),c.Ob(m.a),c.Ob(z.a),c.Ob(u.a))},e.\u0275cmp=c.Ib({type:e,selectors:[["app-provider-edit"]],inputs:{providerId:"providerId"},decls:26,vars:9,consts:[["nz-form","","nzLayout","vertical",3,"formGroup"],[3,"nzSpinning"],["nz-row",""],["nz-col","",3,"nzSm","nzXs"],["nzRequired","","nzFor","ruc"],[3,"nzErrorTip"],["nz-input","","formControlName","ruc","placeholder","RUC"],["customValidatorRuc",""],["nzRequired","","nzFor","businessname"],["nzErrorTip","Campo obligatorio."],["nz-input","","formControlName","businessname","placeholder","Raz\xf3n Social"],["nzFor","tradename"],["nz-input","","formControlName","tradename","placeholder","Nombre Comercial"],[4,"nzModalFooter"],[4,"ngIf"],["nz-button","","nzType","default","nzDanger","",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(e,n){if(1&e&&(c.Ub(0,"form",0),c.Ub(1,"nz-spin",1),c.Ub(2,"div",2),c.Ub(3,"div",3),c.Ub(4,"nz-form-item"),c.Ub(5,"nz-form-label",4),c.Hc(6,"RUC"),c.Tb(),c.Ub(7,"nz-form-control",5),c.Pb(8,"input",6),c.Fc(9,U,2,2,"ng-template",null,7,c.Gc),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(11,"div",2),c.Ub(12,"div",3),c.Ub(13,"nz-form-item"),c.Ub(14,"nz-form-label",8),c.Hc(15,"Raz\xf3n Social"),c.Tb(),c.Ub(16,"nz-form-control",9),c.Pb(17,"input",10),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(18,"div",2),c.Ub(19,"div",3),c.Ub(20,"nz-form-item"),c.Ub(21,"nz-form-label",11),c.Hc(22,"Nombre Comercial"),c.Tb(),c.Ub(23,"nz-form-control",9),c.Pb(24,"input",12),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Fc(25,I,5,1,"div",13)),2&e){const e=c.uc(10);c.mc("formGroup",n.frmProviderEdit),c.Ab(1),c.mc("nzSpinning",n.loadingSping),c.Ab(2),c.mc("nzSm",12)("nzXs",12),c.Ab(4),c.mc("nzErrorTip",e),c.Ab(5),c.mc("nzSm",24)("nzXs",24),c.Ab(7),c.mc("nzSm",24)("nzXs",24)}},directives:[s.r,s.n,h.b,s.i,p.a,f.c,f.a,h.c,h.d,h.a,g.b,s.d,s.m,s.h,l.a,T.n,v.a,S.a,P.a],styles:[""]}),e})();var C=t("YdS3"),y=t("jTf7"),O=t("66zS"),F=t("haRT"),L=t("W4B1");function N(e,n){if(1&e&&c.Pb(0,"nz-option",20),2&e){const e=n.$implicit;c.mc("nzValue",e.parameterDetailId)("nzLabel",e.fieldValue1)}}function M(e,n){1&e&&(c.Ub(0,"button",26),c.Pb(1,"i",27),c.Tb())}function G(e,n){1&e&&(c.Ub(0,"button",28),c.Pb(1,"i",29),c.Tb())}function H(e,n){if(1&e){const e=c.Vb();c.Ub(0,"tr"),c.Ub(1,"td",21),c.Hc(2),c.Tb(),c.Ub(3,"td",21),c.Hc(4),c.Tb(),c.Ub(5,"td",21),c.Hc(6),c.Tb(),c.Ub(7,"td",21),c.Hc(8),c.Tb(),c.Ub(9,"td",21),c.Ub(10,"button",22),c.bc("click",function(){c.vc(e);const t=n.$implicit;return c.ec().onOpenProviderEditModal(t.providerId)}),c.Pb(11,"i",23),c.Tb(),c.Tb(),c.Ub(12,"td",21),c.Fc(13,M,2,0,"button",24),c.Tb(),c.Ub(14,"td",21),c.Fc(15,G,2,0,"button",25),c.Tb(),c.Tb()}if(2&e){const e=n.$implicit,t=c.ec();c.Ab(2),c.Ic(e.businessName),c.Ab(2),c.Ic(e.tradename),c.Ab(2),c.Ic(e.ruc),c.Ab(2),c.Ic(e.stateName),c.Ab(5),c.mc("ngIf",t.state!==e.state),c.Ab(2),c.mc("ngIf",t.state===e.state)}}const x=[{path:"",component:(()=>{class e{constructor(e,n,t,i){this.fb=e,this.modalService=n,this.modalMessage=t,this.lontecService=i,this.stateList=[],this.state=o.a.STATE_ENTITY.ENABLE,this.pageIndex=o.a.PAGINATION.PAGE_INDEX,this.pageSize=o.a.PAGINATION.PAGE_SIZE,this.sortProperty="",this.sortPropertyName="",this.totalRecord=0,this.tableProviderLoading=!1,this.tableProvider=[]}ngOnInit(){this.initForm(),this.initList()}initForm(){this.frmProvider=this.fb.group({businessname:[null],ddlstate:[null]})}initList(){Object(a.a)([this.lontecService.getParameterDetailSearch({parameterId:o.a.PARAMETERS.ENTITY_STATE})]).subscribe(e=>{this.stateList=e[0]},e=>{this.modalMessage.error(o.a.MESSAGE.ERROR_GET_DATA)},()=>{this.onSearch()})}onSearch(){let e=null===this.frmProvider.value.businessname?"":this.frmProvider.value.businessname,n=null===this.frmProvider.controls.ddlstate.value?0:this.frmProvider.controls.ddlstate.value;this.tableProviderLoading=!0,this.lontecService.getProviderFindAll({businessName:e,state:n,PageIndex:this.pageIndex,PageSize:this.pageSize,sort:this.sortProperty}).subscribe(e=>{this.tableProvider=e.items,this.totalRecord=e.pagination.total,this.tableProviderLoading=!1},e=>{this.tableProviderLoading=!1,this.modalMessage.error(o.a.MESSAGE.ERROR_GET_DATA)})}onQueryParamsChange(e){const{pageSize:n,pageIndex:t,sort:i}=e;let r;this.pageIndex=t,this.pageSize=n,null!==i[0].value&&("ascend"==i[0].value&&(r="ASC"),"descend"==i[0].value&&(r="DESC"),"businessname"===i[0].key&&(this.sortProperty="business_name "+r)),this.onSearch()}onOpenProviderEditModal(e){this.modalService.create({nzTitle:o.a.MODAL_TITLE.REGISTER_PROVIDER,nzClosable:!1,nzContent:R,nzComponentParams:{providerId:e}}).afterClose.subscribe(e=>{e.refresh&&this.onSearch()})}}return e.\u0275fac=function(n){return new(n||e)(c.Ob(s.e),c.Ob(l.d),c.Ob(m.a),c.Ob(z.a))},e.\u0275cmp=c.Ib({type:e,selectors:[["app-provider"]],decls:42,vars:26,consts:[["nz-form","","nzLayout","vertical",3,"formGroup"],["nzTitle","Proveedores"],["nz-row",""],["nz-col","",3,"nzSm","nzXs"],["nzFor","businessname"],["nz-input","","formControlName","businessname","placeholder","Raz\xf3n Social"],["nzFor","ddlstate"],["nzShowSearch","","nzAllowClear","","formControlName","ddlstate","nzPlaceHolder","Estados"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[1,"text-right"],["nz-button","","nzType","primary",2,"margin-left","5px","margin-right","5px",3,"click"],["nz-icon","","nzType","plus"],["nz-button","","nzType","default",2,"margin-left","5px","margin-right","9px",3,"click"],["nz-icon","","nzType","search"],["nz-row","",1,"ant-form-item","mt-15"],["nzSize","small","nzShowSizeChanger","",3,"nzFrontPagination","nzLoading","nzData","nzTotal","nzPageIndex","nzPageSize","nzPageIndexChange","nzPageSizeChange","nzQueryParams"],["nzColumnKey","businessname",1,"tr-color",3,"nzAlign","nzSortFn"],[1,"tr-color",3,"nzAlign"],[1,"tr-color",3,"nzAlign","nzWidth"],[4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],["nzAlign","center"],["nz-button","","nzType","primary","nzTooltipTitle","Editar","nzTooltipPlacement","topLeft","nz-tooltip","",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-button","","nzTooltipTitle","Habilitar","nzTooltipPlacement","topLeft","nz-tooltip","",4,"ngIf"],["nz-button","","nzTooltipTitle","Deshabilitar","nzTooltipPlacement","topLeft","nz-tooltip","","nzDanger","",4,"ngIf"],["nz-button","","nzTooltipTitle","Habilitar","nzTooltipPlacement","topLeft","nz-tooltip",""],["nz-icon","","nzType","like","nzTheme","outline"],["nz-button","","nzTooltipTitle","Deshabilitar","nzTooltipPlacement","topLeft","nz-tooltip","","nzDanger",""],["nz-icon","","nzType","dislike","nzTheme","outline"]],template:function(e,n){1&e&&(c.Ub(0,"form",0),c.Ub(1,"nz-card",1),c.Ub(2,"div",2),c.Ub(3,"div",3),c.Ub(4,"nz-form-item"),c.Ub(5,"nz-form-label",4),c.Hc(6,"Raz\xf3n Social"),c.Tb(),c.Ub(7,"nz-form-control"),c.Pb(8,"input",5),c.Tb(),c.Tb(),c.Tb(),c.Ub(9,"div",3),c.Ub(10,"nz-form-item"),c.Ub(11,"nz-form-label",6),c.Hc(12,"Estado"),c.Tb(),c.Ub(13,"nz-form-control"),c.Ub(14,"nz-select",7),c.Fc(15,N,1,2,"nz-option",8),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(16,"div",2),c.Ub(17,"div",3),c.Ub(18,"div",9),c.Ub(19,"button",10),c.bc("click",function(){return n.onOpenProviderEditModal()}),c.Pb(20,"i",11),c.Hc(21," Nuevo"),c.Tb(),c.Ub(22,"button",12),c.bc("click",function(){return n.onSearch()}),c.Pb(23,"i",13),c.Hc(24,"Buscar"),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(25,"div",14),c.Ub(26,"nz-table",15),c.bc("nzPageIndexChange",function(e){return n.pageIndex=e})("nzPageSizeChange",function(e){return n.pageSize=e})("nzQueryParams",function(e){return n.onQueryParamsChange(e)}),c.Ub(27,"thead"),c.Ub(28,"tr"),c.Ub(29,"th",16),c.Hc(30,"Raz\xf3n Social"),c.Tb(),c.Ub(31,"th",17),c.Hc(32,"Nombre Comercial"),c.Tb(),c.Ub(33,"th",17),c.Hc(34,"RUC"),c.Tb(),c.Ub(35,"th",17),c.Hc(36,"Estado"),c.Tb(),c.Pb(37,"th",18),c.Pb(38,"th",18),c.Pb(39,"th",18),c.Tb(),c.Tb(),c.Ub(40,"tbody"),c.Fc(41,H,16,6,"tr",19),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb()),2&e&&(c.mc("formGroup",n.frmProvider),c.Ab(3),c.mc("nzSm",8)("nzXs",24),c.Ab(6),c.mc("nzSm",8)("nzXs",24),c.Ab(6),c.mc("ngForOf",n.stateList),c.Ab(2),c.mc("nzSm",24)("nzXs",24),c.Ab(9),c.mc("nzFrontPagination",!1)("nzLoading",n.tableProviderLoading)("nzData",n.tableProvider)("nzTotal",n.totalRecord)("nzPageIndex",n.pageIndex)("nzPageSize",n.pageSize),c.Ab(3),c.mc("nzAlign","center")("nzSortFn",!0),c.Ab(2),c.mc("nzAlign","center"),c.Ab(2),c.mc("nzAlign","center"),c.Ab(2),c.mc("nzAlign","center"),c.Ab(2),c.mc("nzAlign","center")("nzWidth","20px"),c.Ab(1),c.mc("nzAlign","center")("nzWidth","20px"),c.Ab(1),c.mc("nzAlign","center")("nzWidth","20px"),c.Ab(2),c.mc("ngForOf",n.tableProvider))},directives:[s.r,s.n,h.b,s.i,C.a,f.c,f.a,h.c,h.d,h.a,g.b,s.d,s.m,s.h,y.d,T.m,v.a,S.a,P.a,O.a,F.c,F.j,F.k,F.b,F.i,F.h,F.a,F.f,y.a,L.d,T.n],styles:[""]}),e})()}];let k=(()=>{class e{}return e.\u0275mod=c.Mb({type:e}),e.\u0275inj=c.Lb({factory:function(n){return new(n||e)},imports:[[r.g.forChild(x)],r.g]}),e})(),w=(()=>{class e{}return e.\u0275mod=c.Mb({type:e}),e.\u0275inj=c.Lb({factory:function(n){return new(n||e)},imports:[[i.a,k]]}),e})()}}]);