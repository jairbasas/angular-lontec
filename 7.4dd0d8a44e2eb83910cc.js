(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{DcLU:function(e,t,n){"use strict";n.r(t),n.d(t,"SupervisorModule",function(){return w});var o=n("NdbC"),i=n("iInd"),r=n("36fG"),a=n("cp0P"),s=n("s7LF"),b=n("Ez0L"),l=n("8Y7J"),c=n("NFMk"),m=n("vU8h"),u=n("JXeA"),d=n("nsZx"),p=n("fXYU"),z=n("wf2+"),h=n("fb/r"),f=n("tYkK"),T=n("px0D"),S=n("jTf7"),g=n("SVse"),v=n("WJhm"),U=n("GaVp"),A=n("Jp/u");function E(e,t){if(1&e&&l.Pb(0,"nz-option",26),2&e){const e=t.$implicit;l.mc("nzValue",e.parameterDetailId)("nzLabel",e.fieldValue1)}}function P(e,t){1&e&&(l.Sb(0),l.Hc(1," Campo obligatorio. "),l.Rb())}function y(e,t){1&e&&(l.Sb(0),l.Hc(1," Debe ingresar s\xf3lo n\xfameros. "),l.Rb())}function I(e,t){if(1&e&&(l.Fc(0,P,2,0,"ng-container",27),l.Fc(1,y,2,0,"ng-container",27)),2&e){const e=t.$implicit;l.mc("ngIf",e.hasError("required")),l.Ab(1),l.mc("ngIf",!e.hasError("required")&&e.hasError("validateAmount"))}}function N(e,t){if(1&e){const e=l.Vb();l.Ub(0,"div"),l.Ub(1,"button",28),l.bc("click",function(){return l.vc(e),l.ec().onCancel()}),l.Hc(2,"Cancelar"),l.Tb(),l.Ub(3,"button",29),l.bc("click",function(){return l.vc(e),l.ec().onSubmit()}),l.Hc(4,"Guardar"),l.Tb(),l.Tb()}if(2&e){const e=l.ec();l.Ab(3),l.mc("nzLoading",e.loadingSubmit)}}let L=(()=>{class e{constructor(e,t,n,o,i,a){this.fb=e,this.modalRef=t,this.modalMessage=n,this.messageService=o,this.lontecService=i,this.formValidator=a,this.state=r.a.STATE_ENTITY.ENABLE,this.identityDocumentTypeList=[],this.loadingSubmit=!1,this.loadingSping=!1}ngOnInit(){this.initForm(),this.initList()}initForm(){this.frmSupervisorEdit=this.fb.group({firstname:[null,[s.q.required,this.formValidator.espacionBlanco]],secondname:[null],fatherlastname:[null,[s.q.required,this.formValidator.espacionBlanco]],motherlastname:[null],ddlidentitydocumenttype:[null],documentnumber:[null],phonenumber:[null],cost:[null,[s.q.required,this.formValidator.validateAmount]]})}initList(){Object(a.a)([this.lontecService.getParameterDetailSearch({parameterId:r.a.PARAMETERS.IDENTITY_DOCUMENT_TYPE})]).subscribe(e=>{this.identityDocumentTypeList=e[0]},e=>{this.modalMessage.error(r.a.MESSAGE.ERROR_GET_DATA)},()=>{void 0!==this.supervisorId&&this.onSearch()})}onBlurCost(e){isNaN(e)||""===e||this.frmSupervisorEdit.get("cost").setValue(Object(b.i)(e))}onSearch(){this.loadingSping=!0,this.lontecService.getSupervisorById(this.supervisorId).subscribe(e=>{var t,n,o,i,r,a,s,l;null===(t=this.frmSupervisorEdit.get("firstname"))||void 0===t||t.setValue(e.firstName),null===(n=this.frmSupervisorEdit.get("secondname"))||void 0===n||n.setValue(e.secondName),null===(o=this.frmSupervisorEdit.get("fatherlastname"))||void 0===o||o.setValue(e.fatherLastName),null===(i=this.frmSupervisorEdit.get("motherlastname"))||void 0===i||i.setValue(e.motherLastName),null===(r=this.frmSupervisorEdit.get("ddlidentitydocumenttype"))||void 0===r||r.setValue(e.identityDocumentTypeId),null===(a=this.frmSupervisorEdit.get("documentnumber"))||void 0===a||a.setValue(e.documentNumber),null===(s=this.frmSupervisorEdit.get("phonenumber"))||void 0===s||s.setValue(e.phoneNumber),null===(l=this.frmSupervisorEdit.get("cost"))||void 0===l||l.setValue(Object(b.i)(e.cost)),this.state=Number(e.state),this.loadingSping=!1},e=>{this.loadingSping=!1,this.modalMessage.error(r.a.MESSAGE.ERROR_GET_DATA)})}setCommand(){return{supervisorId:this.supervisorId,firstName:this.frmSupervisorEdit.value.firstname,secondName:this.frmSupervisorEdit.value.secondname,fatherLastName:this.frmSupervisorEdit.value.fatherlastname,motherLastName:this.frmSupervisorEdit.value.motherlastname,documentNumber:this.frmSupervisorEdit.value.documentnumber,phoneNumber:this.frmSupervisorEdit.value.phonenumber,cost:this.frmSupervisorEdit.value.cost,identityDocumentTypeId:this.frmSupervisorEdit.value.ddlidentitydocumenttype,state:this.state,registerUserId:Object(b.d)(),registerUserFullname:Object(b.c)()}}onCancel(){this.modalRef.destroy({refresh:!1})}onSubmit(){Object(b.j)(this.frmSupervisorEdit)?this.modalMessage.confirm(r.a.MESSAGE.CONFIRM_QUESTION,()=>{this.loadingSubmit=!0,this.lontecService.postSupervisor(this.setCommand()).subscribe(()=>{this.loadingSubmit=!1,this.messageService.success(r.a.MESSAGE.SUCCESS_SAVE),this.modalRef.destroy({refresh:!0})},e=>{this.loadingSubmit=!1,this.modalMessage.error(r.a.MESSAGE.ERROR)})}):this.messageService.warning(r.a.MESSAGE.COMPLETE_FORM)}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(s.e),l.Ob(c.c),l.Ob(m.a),l.Ob(u.e),l.Ob(d.a),l.Ob(p.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-supervisor-edit"]],inputs:{supervisorId:"supervisorId"},decls:59,vars:20,consts:[["nz-form","","nzLayout","vertical",3,"formGroup"],[3,"nzSpinning"],["nz-row",""],["nz-col","",3,"nzSm","nzXs"],["nzRequired","","nzFor","firstname"],["nzErrorTip","Campo obligatorio."],["nz-input","","formControlName","firstname","placeholder","Primer Nombre"],["nzFor","secondname"],["nz-input","","formControlName","secondname","placeholder","Segundo Nombre"],["nzRequired","","nzFor","fatherlastname"],["nz-input","","formControlName","fatherlastname","placeholder","Apellido Paterno"],["nzRequired","","nzFor","motherlastname"],["nz-input","","formControlName","motherlastname","placeholder","Apellido Materno"],["nzFor","identitydocumenttype"],["nzShowSearch","","nzAllowClear","","formControlName","ddlidentitydocumenttype","nzPlaceHolder","Tipo Documento"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzFor","documentnumber"],["nz-input","","formControlName","documentnumber","placeholder","N\xfamero Documento"],["nzFor","phonenumber"],["nz-input","","formControlName","phonenumber","placeholder","Tel\xe9fono"],["nzRequired","","nzFor","cost"],[3,"nzErrorTip"],["nzAddOnBefore","S./"],["nz-input","","formControlName","cost","placeholder","Costo",1,"input-group",3,"blur"],["customValidatorCost",""],[4,"nzModalFooter"],[3,"nzValue","nzLabel"],[4,"ngIf"],["nz-button","","nzType","primary","nzDanger","",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(e,t){if(1&e&&(l.Ub(0,"form",0),l.Ub(1,"nz-spin",1),l.Ub(2,"div",2),l.Ub(3,"div",3),l.Ub(4,"nz-form-item"),l.Ub(5,"nz-form-label",4),l.Hc(6,"Primer Nombre"),l.Tb(),l.Ub(7,"nz-form-control",5),l.Pb(8,"input",6),l.Tb(),l.Tb(),l.Tb(),l.Ub(9,"div",3),l.Ub(10,"nz-form-item"),l.Ub(11,"nz-form-label",7),l.Hc(12,"Segundo Nombre"),l.Tb(),l.Ub(13,"nz-form-control",5),l.Pb(14,"input",8),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(15,"div",2),l.Ub(16,"div",3),l.Ub(17,"nz-form-item"),l.Ub(18,"nz-form-label",9),l.Hc(19,"Apellido Paterno"),l.Tb(),l.Ub(20,"nz-form-control",5),l.Pb(21,"input",10),l.Tb(),l.Tb(),l.Tb(),l.Ub(22,"div",3),l.Ub(23,"nz-form-item"),l.Ub(24,"nz-form-label",11),l.Hc(25,"Apellido Materno"),l.Tb(),l.Ub(26,"nz-form-control",5),l.Pb(27,"input",12),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(28,"div",2),l.Ub(29,"div",3),l.Ub(30,"nz-form-item"),l.Ub(31,"nz-form-label",13),l.Hc(32,"Tipo Documento"),l.Tb(),l.Ub(33,"nz-form-control"),l.Ub(34,"nz-select",14),l.Fc(35,E,1,2,"nz-option",15),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(36,"div",3),l.Ub(37,"nz-form-item"),l.Ub(38,"nz-form-label",16),l.Hc(39,"N\xfamero Documento"),l.Tb(),l.Ub(40,"nz-form-control",5),l.Pb(41,"input",17),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(42,"div",2),l.Ub(43,"div",3),l.Ub(44,"nz-form-item"),l.Ub(45,"nz-form-label",18),l.Hc(46,"Tel\xe9fono"),l.Tb(),l.Ub(47,"nz-form-control",5),l.Pb(48,"input",19),l.Tb(),l.Tb(),l.Tb(),l.Ub(49,"div",3),l.Ub(50,"nz-form-item"),l.Ub(51,"nz-form-label",20),l.Hc(52,"Costo"),l.Tb(),l.Ub(53,"nz-form-control",21),l.Ub(54,"nz-input-group",22),l.Ub(55,"input",23),l.bc("blur",function(e){return t.onBlurCost(e.target.value)}),l.Tb(),l.Fc(56,I,2,2,"ng-template",null,24,l.Gc),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Fc(58,N,5,1,"div",25)),2&e){const e=l.uc(57);l.mc("formGroup",t.frmSupervisorEdit),l.Ab(1),l.mc("nzSpinning",t.loadingSping),l.Ab(2),l.mc("nzSm",12)("nzXs",12),l.Ab(6),l.mc("nzSm",12)("nzXs",12),l.Ab(7),l.mc("nzSm",12)("nzXs",12),l.Ab(6),l.mc("nzSm",12)("nzXs",12),l.Ab(7),l.mc("nzSm",12)("nzXs",12),l.Ab(6),l.mc("ngForOf",t.identityDocumentTypeList),l.Ab(1),l.mc("nzSm",12)("nzXs",12),l.Ab(7),l.mc("nzSm",12)("nzXs",12),l.Ab(6),l.mc("nzSm",12)("nzXs",12),l.Ab(4),l.mc("nzErrorTip",e)}},directives:[s.r,s.n,z.b,s.i,h.a,f.c,f.a,z.c,z.d,z.a,T.b,s.d,s.m,s.h,S.d,g.m,v.a,T.c,c.a,S.a,g.n,U.a,A.a],styles:[""]}),e})();var C=n("YdS3"),F=n("66zS"),O=n("haRT"),R=n("W4B1"),D=n("UZXO");function M(e,t){if(1&e&&l.Pb(0,"nz-option",20),2&e){const e=t.$implicit;l.mc("nzValue",e.parameterDetailId)("nzLabel",e.fieldValue1)}}function H(e,t){1&e&&(l.Ub(0,"button",26),l.Pb(1,"i",27),l.Tb())}function V(e,t){1&e&&(l.Ub(0,"button",28),l.Pb(1,"i",29),l.Tb())}function G(e,t){if(1&e){const e=l.Vb();l.Ub(0,"tr"),l.Ub(1,"td",21),l.Hc(2),l.Tb(),l.Ub(3,"td",21),l.Hc(4),l.Tb(),l.Ub(5,"td",21),l.Hc(6),l.Tb(),l.Ub(7,"td",21),l.Hc(8),l.fc(9,"amountFormat"),l.Tb(),l.Ub(10,"td",21),l.Hc(11),l.Tb(),l.Ub(12,"td",21),l.Ub(13,"button",22),l.bc("click",function(){l.vc(e);const n=t.$implicit;return l.ec().onOpenSupervisorEditModal(n.supervisorId)}),l.Pb(14,"i",23),l.Tb(),l.Tb(),l.Ub(15,"td",21),l.Fc(16,H,2,0,"button",24),l.Tb(),l.Ub(17,"td",21),l.Fc(18,V,2,0,"button",25),l.Tb(),l.Tb()}if(2&e){const e=t.$implicit,n=l.ec();l.Ab(2),l.Mc("",e.firstName," ",e.secondName," ",e.fatherLastName," ",e.motherLastName,""),l.Ab(2),l.Ic(e.identityDocumentTypeName),l.Ab(2),l.Ic(e.documentNumber),l.Ab(2),l.Ic(l.gc(9,10,e.cost)),l.Ab(3),l.Ic(e.stateName),l.Ab(5),l.mc("ngIf",n.state!==e.state),l.Ab(2),l.mc("ngIf",n.state===e.state)}}const x=[{path:"",component:(()=>{class e{constructor(e,t,n,o){this.fb=e,this.modalMessage=t,this.modalService=n,this.lontecService=o,this.stateList=[],this.state=r.a.STATE_ENTITY.ENABLE,this.pageIndex=r.a.PAGINATION.PAGE_INDEX,this.pageSize=r.a.PAGINATION.PAGE_SIZE,this.sortProperty="",this.sortPropertyName="",this.totalRecord=0,this.tableSupervisorLoading=!1,this.tableSupervisor=[]}ngOnInit(){this.initForm(),this.initList()}initForm(){this.frmSupervisor=this.fb.group({name:[null],ddlstate:[null]})}initList(){Object(a.a)([this.lontecService.getParameterDetailSearch({parameterId:r.a.PARAMETERS.ENTITY_STATE})]).subscribe(e=>{this.stateList=e[0]},e=>{this.modalMessage.error(r.a.MESSAGE.ERROR_GET_DATA)},()=>{this.onSearch()})}onSearch(){let e=null===this.frmSupervisor.value.name?"":this.frmSupervisor.value.name,t=null===this.frmSupervisor.controls.ddlstate.value?0:this.frmSupervisor.controls.ddlstate.value;this.tableSupervisorLoading=!0,this.lontecService.getSupervisorFindAll({name:e,state:t,PageIndex:this.pageIndex,PageSize:this.pageSize,sort:this.sortProperty}).subscribe(e=>{this.tableSupervisor=e.items,this.totalRecord=e.pagination.total,this.tableSupervisorLoading=!1},e=>{this.tableSupervisorLoading=!1,this.modalMessage.error(r.a.MESSAGE.ERROR_GET_DATA)})}onQueryParamsChange(e){const{pageSize:t,pageIndex:n,sort:o}=e;let i;this.pageIndex=n,this.pageSize=t,null!==o[0].value&&("ascend"==o[0].value&&(i="ASC"),"descend"==o[0].value&&(i="DESC"),"name"===o[0].key&&(this.sortProperty="first_name "+i)),this.onSearch()}onOpenSupervisorEditModal(e){this.modalService.create({nzTitle:r.a.MODAL_TITLE.REGISTER_SUPERVISOR,nzClosable:!1,nzContent:L,nzComponentParams:{supervisorId:e}}).afterClose.subscribe(e=>{e.refresh&&this.onSearch()})}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(s.e),l.Ob(m.a),l.Ob(c.d),l.Ob(d.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-supervisor"]],decls:44,vars:27,consts:[["nz-form","","nzLayout","vertical",3,"formGroup"],["nzTitle","Supervisores"],["nz-row",""],["nz-col","",3,"nzSm","nzXs"],["nzFor","name"],["nz-input","","formControlName","name","placeholder","Supervisor"],["nzFor","ddlstate"],["nzShowSearch","","nzAllowClear","","formControlName","ddlstate","nzPlaceHolder","Estados"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[1,"text-right"],["nz-button","","nzType","primary",2,"margin-left","5px","margin-right","5px",3,"click"],["nz-icon","","nzType","plus"],["nz-button","","nzType","default",2,"margin-left","5px","margin-right","9px",3,"click"],["nz-icon","","nzType","search"],["nz-row","",1,"ant-form-item","mt-15"],["nzSize","small","nzShowSizeChanger","",3,"nzFrontPagination","nzLoading","nzData","nzTotal","nzPageIndex","nzPageSize","nzPageIndexChange","nzPageSizeChange","nzQueryParams"],["nzColumnKey","name",1,"tr-color",3,"nzAlign","nzSortFn"],[1,"tr-color",3,"nzAlign"],[1,"tr-color",3,"nzAlign","nzWidth"],[4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],["nzAlign","center"],["nz-button","","nzType","primary","nzTooltipTitle","Editar","nzTooltipPlacement","topLeft","nz-tooltip","",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-button","","nzTooltipTitle","Habilitar","nzTooltipPlacement","topLeft","nz-tooltip","",4,"ngIf"],["nz-button","","nzTooltipTitle","Deshabilitar","nzTooltipPlacement","topLeft","nz-tooltip","","nzDanger","",4,"ngIf"],["nz-button","","nzTooltipTitle","Habilitar","nzTooltipPlacement","topLeft","nz-tooltip",""],["nz-icon","","nzType","like","nzTheme","outline"],["nz-button","","nzTooltipTitle","Deshabilitar","nzTooltipPlacement","topLeft","nz-tooltip","","nzDanger",""],["nz-icon","","nzType","dislike","nzTheme","outline"]],template:function(e,t){1&e&&(l.Ub(0,"form",0),l.Ub(1,"nz-card",1),l.Ub(2,"div",2),l.Ub(3,"div",3),l.Ub(4,"nz-form-item"),l.Ub(5,"nz-form-label",4),l.Hc(6,"Supervisor"),l.Tb(),l.Ub(7,"nz-form-control"),l.Pb(8,"input",5),l.Tb(),l.Tb(),l.Tb(),l.Ub(9,"div",3),l.Ub(10,"nz-form-item"),l.Ub(11,"nz-form-label",6),l.Hc(12,"Estado"),l.Tb(),l.Ub(13,"nz-form-control"),l.Ub(14,"nz-select",7),l.Fc(15,M,1,2,"nz-option",8),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(16,"div",2),l.Ub(17,"div",3),l.Ub(18,"div",9),l.Ub(19,"button",10),l.bc("click",function(){return t.onOpenSupervisorEditModal()}),l.Pb(20,"i",11),l.Hc(21," Nuevo"),l.Tb(),l.Ub(22,"button",12),l.bc("click",function(){return t.onSearch()}),l.Pb(23,"i",13),l.Hc(24,"Buscar"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(25,"div",14),l.Ub(26,"nz-table",15),l.bc("nzPageIndexChange",function(e){return t.pageIndex=e})("nzPageSizeChange",function(e){return t.pageSize=e})("nzQueryParams",function(e){return t.onQueryParamsChange(e)}),l.Ub(27,"thead"),l.Ub(28,"tr"),l.Ub(29,"th",16),l.Hc(30,"T\xe9cnico"),l.Tb(),l.Ub(31,"th",17),l.Hc(32,"Tipo Documento"),l.Tb(),l.Ub(33,"th",17),l.Hc(34,"N\xfamero Documento"),l.Tb(),l.Ub(35,"th",17),l.Hc(36,"Costo por Hora"),l.Tb(),l.Ub(37,"th",17),l.Hc(38,"Estado"),l.Tb(),l.Pb(39,"th",18),l.Pb(40,"th",18),l.Pb(41,"th",18),l.Tb(),l.Tb(),l.Ub(42,"tbody"),l.Fc(43,G,19,12,"tr",19),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e&&(l.mc("formGroup",t.frmSupervisor),l.Ab(3),l.mc("nzSm",8)("nzXs",24),l.Ab(6),l.mc("nzSm",8)("nzXs",24),l.Ab(6),l.mc("ngForOf",t.stateList),l.Ab(2),l.mc("nzSm",24)("nzXs",24),l.Ab(9),l.mc("nzFrontPagination",!1)("nzLoading",t.tableSupervisorLoading)("nzData",t.tableSupervisor)("nzTotal",t.totalRecord)("nzPageIndex",t.pageIndex)("nzPageSize",t.pageSize),l.Ab(3),l.mc("nzAlign","center")("nzSortFn",!0),l.Ab(2),l.mc("nzAlign","center"),l.Ab(2),l.mc("nzAlign","center"),l.Ab(2),l.mc("nzAlign","center"),l.Ab(2),l.mc("nzAlign","center"),l.Ab(2),l.mc("nzAlign","center")("nzWidth","20px"),l.Ab(1),l.mc("nzAlign","center")("nzWidth","20px"),l.Ab(1),l.mc("nzAlign","center")("nzWidth","20px"),l.Ab(2),l.mc("ngForOf",t.tableSupervisor))},directives:[s.r,s.n,z.b,s.i,C.a,f.c,f.a,z.c,z.d,z.a,T.b,s.d,s.m,s.h,S.d,g.m,U.a,A.a,v.a,F.a,O.c,O.j,O.k,O.b,O.i,O.h,O.a,O.f,S.a,R.d,g.n],pipes:[D.a],styles:[""]}),e})()}];let _=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[i.g.forChild(x)],i.g]}),e})(),w=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[o.a,_]]}),e})()}}]);