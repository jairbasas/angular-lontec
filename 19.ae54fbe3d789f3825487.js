(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{uwDA:function(e,t,n){"use strict";n.r(t),n.d(t,"ServiceActivityModule",function(){return De});var i=n("NdbC"),r=n("iInd"),a=n("mrSG"),c=n("36fG"),o=n("cp0P"),s=n("s7LF"),l=n("Ez0L"),u=n("8Y7J"),b=n("NFMk"),m=n("fXYU"),d=n("JXeA"),p=n("wf2+"),h=n("tYkK"),v=n("px0D"),f=n("GaVp"),T=n("Jp/u"),z=n("WJhm");function g(e,t){if(1&e){const e=u.Vb();u.Ub(0,"div"),u.Ub(1,"button",7),u.bc("click",function(){return u.vc(e),u.ec().onCancel()}),u.Hc(2,"Cancelar"),u.Tb(),u.Ub(3,"button",8),u.bc("click",function(){return u.vc(e),u.ec().onSubmit()}),u.Hc(4,"Aceptar"),u.Tb(),u.Tb()}}let S=(()=>{class e{constructor(e,t,n,i){this.fb=e,this.modalRef=t,this.formValidator=n,this.messageService=i}ngOnInit(){this.initForm()}initForm(){this.frmAddActivity=this.fb.group({serviceactivityname:[null,[s.q.required,this.formValidator.espacionBlanco]]})}onCancel(){this.modalRef.destroy()}onSubmit(){Object(l.j)(this.frmAddActivity)?this.modalRef.destroy({activityName:this.frmAddActivity.value.serviceactivityname,index:Math.random()}):this.messageService.warning(c.a.MESSAGE.COMPLETE_FORM)}}return e.\u0275fac=function(t){return new(t||e)(u.Ob(s.e),u.Ob(b.c),u.Ob(m.a),u.Ob(d.e))},e.\u0275cmp=u.Ib({type:e,selectors:[["app-add-activity"]],decls:9,vars:3,consts:[["nz-form","","nzLayout","vertical",3,"formGroup"],["nz-row",""],["nz-col","",3,"nzSm","nzXs"],["nzRequired","","nzFor","serviceactivityname"],["nzErrorTip","Campo obligatorio."],["nz-input","","formControlName","serviceactivityname","placeholder","Nombre Actividad"],[4,"nzModalFooter"],["nz-button","","nzType","default","nzDanger","",3,"click"],["nz-button","","nzType","primary",3,"click"]],template:function(e,t){1&e&&(u.Ub(0,"form",0),u.Ub(1,"div",1),u.Ub(2,"div",2),u.Ub(3,"nz-form-item"),u.Ub(4,"nz-form-label",3),u.Hc(5,"Nombre Actividad"),u.Tb(),u.Ub(6,"nz-form-control",4),u.Pb(7,"input",5),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Fc(8,g,5,0,"div",6)),2&e&&(u.mc("formGroup",t.frmAddActivity),u.Ab(2),u.mc("nzSm",24)("nzXs",24))},directives:[s.r,s.n,p.b,s.i,h.c,h.a,p.c,p.d,p.a,v.b,s.d,s.m,s.h,b.a,f.a,T.a,z.a],styles:[""]}),e})();var y=n("vU8h"),A=n("nsZx"),E=n("oBm0"),U=n("fb/r"),x=n("jTf7"),N=n("SVse"),C=n("lAiz"),I=n("YdS3"),F=n("1+nf");function P(e,t){if(1&e&&u.Pb(0,"nz-option",32),2&e){const e=t.$implicit;u.mc("nzValue",e.manufacturingExpenseId)("nzLabel",e.manufacturingExpenseName)}}function M(e,t){if(1&e&&u.Pb(0,"nz-option",32),2&e){const e=t.$implicit;u.mc("nzValue",e.typeManufacturingExpenseId)("nzLabel",e.typeManufacturingExpenseName)}}function V(e,t){if(1&e&&u.Pb(0,"nz-option",32),2&e){const e=t.$implicit;u.mc("nzValue",e.manufacturingExpenseSubTypeId)("nzLabel",e.manufacturingExpenseSubTypeName)}}function L(e,t){if(1&e&&u.Pb(0,"nz-option",32),2&e){const e=t.$implicit;u.mc("nzValue",e.providerId)("nzLabel",e.businessName)}}function O(e,t){if(1&e&&u.Pb(0,"nz-option",32),2&e){const e=t.$implicit;u.mc("nzValue",e.parameterDetailId)("nzLabel",e.fieldValue1)}}function H(e,t){1&e&&(u.Sb(0),u.Hc(1," Campo obligatorio. "),u.Rb())}function R(e,t){1&e&&(u.Sb(0),u.Hc(1," Debe ingresar s\xf3lo n\xfameros. "),u.Rb())}function q(e,t){if(1&e&&(u.Fc(0,H,2,0,"ng-container",33),u.Fc(1,R,2,0,"ng-container",33)),2&e){const e=t.$implicit;u.mc("ngIf",e.hasError("required")),u.Ab(1),u.mc("ngIf",!e.hasError("required")&&e.hasError("validateAmount"))}}function D(e,t){1&e&&(u.Sb(0),u.Hc(1," Campo obligatorio. "),u.Rb())}function G(e,t){1&e&&(u.Sb(0),u.Hc(1," Debe ingresar s\xf3lo n\xfameros. "),u.Rb())}function k(e,t){if(1&e&&(u.Fc(0,D,2,0,"ng-container",33),u.Fc(1,G,2,0,"ng-container",33)),2&e){const e=t.$implicit;u.mc("ngIf",e.hasError("required")),u.Ab(1),u.mc("ngIf",!e.hasError("required")&&e.hasError("validateAmount"))}}function _(e,t){if(1&e){const e=u.Vb();u.Ub(0,"div"),u.Ub(1,"button",34),u.bc("click",function(){return u.vc(e),u.ec().onCancel()}),u.Hc(2,"Cancelar"),u.Tb(),u.Ub(3,"button",35),u.bc("click",function(){return u.vc(e),u.ec().onSubmit()}),u.Hc(4,"Aceptar"),u.Tb(),u.Tb()}}let w=(()=>{class e{constructor(e,t,n,i,r,a){this.fb=e,this.modalRef=t,this.messageService=n,this.formValidator=i,this.modalMessage=r,this.lontecService=a,this.dateFormat=c.a.FORMATS.DATE,this.paymentVoucherTypeList=[],this.providerList=[],this.manufacturingExpenseList=[],this.typeManufacturingExpenseList=[],this.manufacturingExpenseSubTypeList=[]}ngOnInit(){this.initForm(),this.initList()}initForm(){this.frmSelectConsumable=this.fb.group({ddlmanufacturingexpense:[null,[s.q.required]],ddltypemanufacturingexpense:[null,[s.q.required]],ddlmanufacturingexpensesubtype:[null,[s.q.required]],ddlprovider:[null,[s.q.required]],ddlpaymentvoucher:[null,[s.q.required]],purchasedate:[null,[s.q.required]],serievoucher:[null,[s.q.required]],numbervoucher:[null,[s.q.required]],consumablename:[null,[s.q.required,this.formValidator.espacionBlanco]],cost:[null,[s.q.required,this.formValidator.validateAmount]],quantity:[null,[s.q.required,this.formValidator.validateAmount]]})}initList(){Object(o.a)([this.lontecService.getParameterDetailSearch({parameterId:c.a.PARAMETERS.PAYMENT_VOUCHER_TYPE}),this.lontecService.getProviderSearch({state:c.a.STATE_ENTITY.ENABLE}),this.lontecService.getManufacturingExpenseSearch({state:c.a.STATE_ENTITY.ENABLE})]).subscribe(e=>{this.paymentVoucherTypeList=e[0],this.providerList=e[1],this.manufacturingExpenseList=e[2]},e=>{this.modalMessage.error(c.a.MESSAGE.ERROR_GET_DATA)},()=>{void 0!==this.index&&this.onSearch()})}onBlurCost(e){isNaN(e)||""===e||this.frmSelectConsumable.get("cost").setValue(Object(l.i)(e))}onChangeddlmanufacturingexpense(e){var t;null===(t=this.frmSelectConsumable.get("ddltypemanufacturingexpense"))||void 0===t||t.setValue(null),this.typeManufacturingExpenseList=[],null!==e&&this.lontecService.getTypeManufacturingExpenseSearch({manufacturingExpenseId:Number(e)}).subscribe(e=>{this.typeManufacturingExpenseList=e},e=>{this.modalMessage.error(c.a.MESSAGE.ERROR_GET_DATA)})}onChangeddlmanufacturingexpensesubtype(e){var t;null===(t=this.frmSelectConsumable.get("ddlmanufacturingexpensesubtype"))||void 0===t||t.setValue(null),this.manufacturingExpenseSubTypeList=[],null!==e&&this.lontecService.getManufacturingExpenseSubTypeSearch({typeManufacturingExpenseId:Number(e),state:c.a.STATE_ENTITY.ENABLE}).subscribe(e=>{this.manufacturingExpenseSubTypeList=e},e=>{this.modalMessage.error(c.a.MESSAGE.ERROR_GET_DATA)})}onSearch(){var e,t,n,i,r,a,c,o,s,u,b;let m=this.tableServiceConsumable.find(e=>e.index==this.index);null===(e=this.frmSelectConsumable.get("ddlmanufacturingexpense"))||void 0===e||e.setValue(m.manufacturingExpenseId),null===(t=this.frmSelectConsumable.get("ddltypemanufacturingexpense"))||void 0===t||t.setValue(m.typeManufacturingExpenseId),null===(n=this.frmSelectConsumable.get("ddlmanufacturingexpensesubtype"))||void 0===n||n.setValue(m.manufacturingExpenseSubTypeId),null===(i=this.frmSelectConsumable.get("ddlpaymentvoucher"))||void 0===i||i.setValue(m.paymentVoucherTypeId),null===(r=this.frmSelectConsumable.get("serievoucher"))||void 0===r||r.setValue(m.serieVoucher),null===(a=this.frmSelectConsumable.get("numbervoucher"))||void 0===a||a.setValue(m.numberVoucher),null===(c=this.frmSelectConsumable.get("consumablename"))||void 0===c||c.setValue(m.consumableName),null===(o=this.frmSelectConsumable.get("cost"))||void 0===o||o.setValue(Object(l.i)(m.amount)),null===(s=this.frmSelectConsumable.get("quantity"))||void 0===s||s.setValue(Object(l.i)(m.quantity)),null===(u=this.frmSelectConsumable.get("ddlprovider"))||void 0===u||u.setValue(m.providerId),null===(b=this.frmSelectConsumable.get("purchasedate"))||void 0===b||b.setValue(m.purchaseDate)}onAddServiceConsubable(){let e;return 0===this.tableServiceConsumable.length?this.tableServiceConsumable.push({paymentVoucherTypeId:this.frmSelectConsumable.value.ddlpaymentvoucher,paymentVoucherTypeName:this.paymentVoucherTypeList.find(e=>Number(e.parameterDetailId)===Number(this.frmSelectConsumable.value.ddlpaymentvoucher)).fieldValue1,serieVoucher:this.frmSelectConsumable.value.serievoucher,numberVoucher:this.frmSelectConsumable.value.numbervoucher,consumableName:this.frmSelectConsumable.value.consumablename,amount:this.frmSelectConsumable.value.cost,quantity:this.frmSelectConsumable.value.quantity,providerId:this.frmSelectConsumable.value.ddlprovider,businessName:this.providerList.find(e=>Number(e.providerId)===Number(this.frmSelectConsumable.value.ddlprovider)).businessName,index:Math.random(),purchaseDate:this.frmSelectConsumable.value.purchasedate,manufacturingExpenseId:this.frmSelectConsumable.value.ddlmanufacturingexpense,manufacturingExpenseName:this.manufacturingExpenseList.find(e=>Number(e.manufacturingExpenseId)===Number(this.frmSelectConsumable.value.ddlmanufacturingexpense)).manufacturingExpenseName,typeManufacturingExpenseName:this.typeManufacturingExpenseList.find(e=>Number(e.typeManufacturingExpenseId)===Number(this.frmSelectConsumable.value.ddltypemanufacturingexpense)).typeManufacturingExpenseName,typeManufacturingExpenseId:this.frmSelectConsumable.value.ddltypemanufacturingexpense,manufacturingExpenseSubTypeName:this.manufacturingExpenseSubTypeList.find(e=>Number(e.manufacturingExpenseSubTypeId)===Number(this.frmSelectConsumable.value.ddlmanufacturingexpensesubtype)).manufacturingExpenseSubTypeName,manufacturingExpenseSubTypeId:this.frmSelectConsumable.value.ddlmanufacturingexpensesubtype}):void 0!==this.index?(e=this.tableServiceConsumable.find(e=>e.index==this.index),e.paymentVoucherTypeId=this.frmSelectConsumable.value.ddlpaymentvoucher,e.paymentVoucherTypeName=this.paymentVoucherTypeList.find(e=>Number(e.parameterDetailId)===Number(this.frmSelectConsumable.value.ddlpaymentvoucher)).fieldValue1,e.serieVoucher=this.frmSelectConsumable.value.serievoucher,e.numberVoucher=this.frmSelectConsumable.value.numbervoucher,e.consumableName=this.frmSelectConsumable.value.consumablename,e.amount=this.frmSelectConsumable.value.cost,e.quantity=this.frmSelectConsumable.value.quantity,e.providerId=this.frmSelectConsumable.value.ddlprovider,e.businessName=this.providerList.find(e=>Number(e.providerId)===Number(this.frmSelectConsumable.value.ddlprovider)).businessName,e.purchaseDate=this.frmSelectConsumable.value.purchasedate,e.manufacturingExpenseId=this.frmSelectConsumable.value.ddlmanufacturingexpense,e.manufacturingExpenseName=this.manufacturingExpenseList.find(e=>Number(e.manufacturingExpenseId)===Number(this.frmSelectConsumable.value.ddlmanufacturingexpense)).manufacturingExpenseName,e.typeManufacturingExpenseId=this.frmSelectConsumable.value.ddltypemanufacturingexpense,e.typeManufacturingExpenseName=this.typeManufacturingExpenseList.find(e=>Number(e.typeManufacturingExpenseId)===Number(this.frmSelectConsumable.value.ddltypemanufacturingexpense)).typeManufacturingExpenseName,e.manufacturingExpenseSubTypeName=this.manufacturingExpenseSubTypeList.find(e=>Number(e.manufacturingExpenseSubTypeId)===Number(this.frmSelectConsumable.value.ddlmanufacturingexpensesubtype)).manufacturingExpenseSubTypeName,e.manufacturingExpenseSubTypeId=this.frmSelectConsumable.value.ddlmanufacturingexpensesubtype):this.tableServiceConsumable.push({paymentVoucherTypeId:this.frmSelectConsumable.value.ddlpaymentvoucher,paymentVoucherTypeName:this.paymentVoucherTypeList.find(e=>Number(e.parameterDetailId)===Number(this.frmSelectConsumable.value.ddlpaymentvoucher)).fieldValue1,serieVoucher:this.frmSelectConsumable.value.serievoucher,numberVoucher:this.frmSelectConsumable.value.numbervoucher,consumableName:this.frmSelectConsumable.value.consumablename,amount:this.frmSelectConsumable.value.cost,quantity:this.frmSelectConsumable.value.quantity,providerId:this.frmSelectConsumable.value.ddlprovider,businessName:this.providerList.find(e=>Number(e.providerId)===Number(this.frmSelectConsumable.value.ddlprovider)).businessName,index:Math.random(),purchaseDate:this.frmSelectConsumable.value.purchasedate,manufacturingExpenseId:this.frmSelectConsumable.value.ddlmanufacturingexpense,manufacturingExpenseName:this.manufacturingExpenseList.find(e=>Number(e.manufacturingExpenseId)===Number(this.frmSelectConsumable.value.ddlmanufacturingexpense)).manufacturingExpenseName,typeManufacturingExpenseName:this.typeManufacturingExpenseList.find(e=>Number(e.typeManufacturingExpenseId)===Number(this.frmSelectConsumable.value.ddltypemanufacturingexpense)).typeManufacturingExpenseName,typeManufacturingExpenseId:this.frmSelectConsumable.value.ddltypemanufacturingexpense,manufacturingExpenseSubTypeName:this.manufacturingExpenseSubTypeList.find(e=>Number(e.manufacturingExpenseSubTypeId)===Number(this.frmSelectConsumable.value.ddlmanufacturingexpensesubtype)).manufacturingExpenseSubTypeName,manufacturingExpenseSubTypeId:this.frmSelectConsumable.value.ddlmanufacturingexpensesubtype}),!0}onCancel(){this.modalRef.destroy()}onSubmit(){Object(l.j)(this.frmSelectConsumable)?(this.onAddServiceConsubable(),this.modalRef.destroy({tableServiceConsumable:this.tableServiceConsumable})):this.messageService.warning(c.a.MESSAGE.COMPLETE_FORM)}}return e.\u0275fac=function(t){return new(t||e)(u.Ob(s.e),u.Ob(b.c),u.Ob(d.e),u.Ob(m.a),u.Ob(y.a),u.Ob(A.a))},e.\u0275cmp=u.Ib({type:e,selectors:[["app-select-consumable"]],inputs:{index:"index",tableServiceConsumable:"tableServiceConsumable"},decls:83,vars:31,consts:[["nz-form","","nzLayout","vertical",3,"formGroup"],["nz-row",""],["nz-col","",3,"nzSm","nzXs"],["nzRequired","","nzFor","manufacturingexpense"],["nzErrorTip","Campo obligatorio."],["nzShowSearch","","formControlName","ddlmanufacturingexpense","nzPlaceHolder","Gasto Fabricaci\xf3n",3,"ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzRequired","","nzFor","typemanufacturingexpense"],["nzShowSearch","","formControlName","ddltypemanufacturingexpense","nzPlaceHolder","Tipo Gasto Fabricaci\xf3n",3,"ngModelChange"],["nzRequired","","nzFor","manufacturingexpensesubtype"],["nzShowSearch","","formControlName","ddlmanufacturingexpensesubtype","nzPlaceHolder","Sub Tipo Gasto Fabricaci\xf3n"],["nzRequired","","nzFor","provider"],["nzShowSearch","","formControlName","ddlprovider","nzPlaceHolder","Proveedor"],["nzRequired","","nzFor","paymentvoucher"],["nzShowSearch","","formControlName","ddlpaymentvoucher","nzPlaceHolder","Tipo Comprobante"],["nzRequired","","nzFor","purchasedate"],["formControlName","purchasedate","nzPlaceHolder","Fecha Compra",3,"nzFormat"],["nzRequired","","nzFor","serievoucher"],["nz-input","","formControlName","serievoucher","placeholder","Serie"],["nzRequired","","nzFor","numbervoucher"],["nz-input","","formControlName","numbervoucher","placeholder","N\xfamero"],["nzRequired","","nzFor","consumablename"],["nz-input","","formControlName","consumablename","placeholder","Consumible"],["nzRequired","","nzFor","cost"],[3,"nzErrorTip"],["nzAddOnBefore","S./"],["nz-input","","formControlName","cost","placeholder","Costo",1,"input-group",3,"blur"],["customValidatorCost",""],["nzRequired","","nzFor","quantity"],["nz-input","","formControlName","quantity","placeholder","Cantidad"],["customValidatorQuantity",""],[4,"nzModalFooter"],[3,"nzValue","nzLabel"],[4,"ngIf"],["nz-button","","nzType","default","nzDanger","",3,"click"],["nz-button","","nzType","primary",3,"click"]],template:function(e,t){if(1&e&&(u.Ub(0,"form",0),u.Ub(1,"div",1),u.Ub(2,"div",2),u.Ub(3,"nz-form-item"),u.Ub(4,"nz-form-label",3),u.Hc(5,"Gasto Fabricaci\xf3n"),u.Tb(),u.Ub(6,"nz-form-control",4),u.Ub(7,"nz-select",5),u.bc("ngModelChange",function(e){return t.onChangeddlmanufacturingexpense(e)}),u.Fc(8,P,1,2,"nz-option",6),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(9,"div",2),u.Ub(10,"nz-form-item"),u.Ub(11,"nz-form-label",7),u.Hc(12,"Tipo Gasto Fabricaci\xf3n"),u.Tb(),u.Ub(13,"nz-form-control",4),u.Ub(14,"nz-select",8),u.bc("ngModelChange",function(e){return t.onChangeddlmanufacturingexpensesubtype(e)}),u.Fc(15,M,1,2,"nz-option",6),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(16,"div",2),u.Ub(17,"nz-form-item"),u.Ub(18,"nz-form-label",9),u.Hc(19,"Sub Tipo Gasto Fabricaci\xf3n"),u.Tb(),u.Ub(20,"nz-form-control",4),u.Ub(21,"nz-select",10),u.Fc(22,V,1,2,"nz-option",6),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(23,"div",1),u.Ub(24,"div",2),u.Ub(25,"nz-form-item"),u.Ub(26,"nz-form-label",11),u.Hc(27,"Proveedor"),u.Tb(),u.Ub(28,"nz-form-control",4),u.Ub(29,"nz-select",12),u.Fc(30,L,1,2,"nz-option",6),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(31,"div",1),u.Ub(32,"div",2),u.Ub(33,"nz-form-item"),u.Ub(34,"nz-form-label",13),u.Hc(35,"Tipo Comprobante"),u.Tb(),u.Ub(36,"nz-form-control",4),u.Ub(37,"nz-select",14),u.Fc(38,O,1,2,"nz-option",6),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(39,"div",1),u.Ub(40,"div",2),u.Ub(41,"nz-form-item"),u.Ub(42,"nz-form-label",15),u.Hc(43,"Fecha Compra"),u.Tb(),u.Ub(44,"nz-form-control",4),u.Pb(45,"nz-date-picker",16),u.Tb(),u.Tb(),u.Tb(),u.Ub(46,"div",2),u.Ub(47,"nz-form-item"),u.Ub(48,"nz-form-label",17),u.Hc(49,"Serie"),u.Tb(),u.Ub(50,"nz-form-control",4),u.Pb(51,"input",18),u.Tb(),u.Tb(),u.Tb(),u.Ub(52,"div",2),u.Ub(53,"nz-form-item"),u.Ub(54,"nz-form-label",19),u.Hc(55,"N\xfamero"),u.Tb(),u.Ub(56,"nz-form-control",4),u.Pb(57,"input",20),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(58,"div",1),u.Ub(59,"div",2),u.Ub(60,"nz-form-item"),u.Ub(61,"nz-form-label",21),u.Hc(62,"Consumible"),u.Tb(),u.Ub(63,"nz-form-control",4),u.Pb(64,"input",22),u.Tb(),u.Tb(),u.Tb(),u.Ub(65,"div",2),u.Ub(66,"nz-form-item"),u.Ub(67,"nz-form-label",23),u.Hc(68,"Costo"),u.Tb(),u.Ub(69,"nz-form-control",24),u.Ub(70,"nz-input-group",25),u.Ub(71,"input",26),u.bc("blur",function(e){return t.onBlurCost(e.target.value)}),u.Tb(),u.Fc(72,q,2,2,"ng-template",null,27,u.Gc),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(74,"div",2),u.Ub(75,"nz-form-item"),u.Ub(76,"nz-form-label",28),u.Hc(77,"Cantidad"),u.Tb(),u.Ub(78,"nz-form-control",24),u.Pb(79,"input",29),u.Fc(80,k,2,2,"ng-template",null,30,u.Gc),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Fc(82,_,5,0,"div",31)),2&e){const e=u.uc(73),n=u.uc(81);u.mc("formGroup",t.frmSelectConsumable),u.Ab(2),u.mc("nzSm",8)("nzXs",24),u.Ab(6),u.mc("ngForOf",t.manufacturingExpenseList),u.Ab(1),u.mc("nzSm",8)("nzXs",24),u.Ab(6),u.mc("ngForOf",t.typeManufacturingExpenseList),u.Ab(1),u.mc("nzSm",8)("nzXs",24),u.Ab(6),u.mc("ngForOf",t.manufacturingExpenseSubTypeList),u.Ab(2),u.mc("nzSm",24)("nzXs",24),u.Ab(6),u.mc("ngForOf",t.providerList),u.Ab(2),u.mc("nzSm",24)("nzXs",24),u.Ab(6),u.mc("ngForOf",t.paymentVoucherTypeList),u.Ab(2),u.mc("nzSm",8)("nzXs",24),u.Ab(5),u.mc("nzFormat",t.dateFormat),u.Ab(1),u.mc("nzSm",8)("nzXs",24),u.Ab(6),u.mc("nzSm",8)("nzXs",24),u.Ab(7),u.mc("nzSm",12)("nzXs",24),u.Ab(6),u.mc("nzSm",6)("nzXs",24),u.Ab(4),u.mc("nzErrorTip",e),u.Ab(5),u.mc("nzSm",6)("nzXs",24),u.Ab(4),u.mc("nzErrorTip",n)}},directives:[s.r,s.n,p.b,s.i,h.c,h.a,p.c,p.d,p.a,x.d,s.m,s.h,N.m,C.b,v.b,s.d,z.a,v.c,b.a,x.a,N.n,f.a,T.a],styles:[""]}),e})();function X(e,t){if(1&e&&u.Pb(0,"nz-option",29),2&e){const e=t.$implicit;u.mc("nzValue",e.manufacturingExpenseId)("nzLabel",e.manufacturingExpenseName)}}function j(e,t){if(1&e&&u.Pb(0,"nz-option",29),2&e){const e=t.$implicit;u.mc("nzValue",e.typeManufacturingExpenseId)("nzLabel",e.typeManufacturingExpenseName)}}function B(e,t){if(1&e&&u.Pb(0,"nz-option",29),2&e){const e=t.$implicit;u.mc("nzValue",e.manufacturingExpenseSubTypeId)("nzLabel",e.manufacturingExpenseSubTypeName)}}function $(e,t){if(1&e&&u.Pb(0,"nz-option",29),2&e){const e=t.$implicit;u.mc("nzValue",e.providerId)("nzLabel",e.businessName)}}function Y(e,t){if(1&e&&u.Pb(0,"nz-option",29),2&e){const e=t.$implicit;u.mc("nzValue",e.parameterDetailId)("nzLabel",e.fieldValue1)}}function K(e,t){1&e&&(u.Sb(0),u.Hc(1," Campo obligatorio. "),u.Rb())}function W(e,t){1&e&&(u.Sb(0),u.Hc(1," Debe ingresar s\xf3lo n\xfameros. "),u.Rb())}function J(e,t){if(1&e&&(u.Fc(0,K,2,0,"ng-container",30),u.Fc(1,W,2,0,"ng-container",30)),2&e){const e=t.$implicit;u.mc("ngIf",e.hasError("required")),u.Ab(1),u.mc("ngIf",!e.hasError("required")&&e.hasError("validateAmount"))}}function Q(e,t){if(1&e){const e=u.Vb();u.Ub(0,"div"),u.Ub(1,"button",31),u.bc("click",function(){return u.vc(e),u.ec().onCancel()}),u.Hc(2,"Cancelar"),u.Tb(),u.Ub(3,"button",32),u.bc("click",function(){return u.vc(e),u.ec().onSubmit()}),u.Hc(4,"Aceptar"),u.Tb(),u.Tb()}}let Z=(()=>{class e{constructor(e,t,n,i,r,a){this.fb=e,this.modalRef=t,this.messageService=n,this.formValidator=i,this.lontecService=r,this.modalMessage=a,this.paymentVoucherTypeList=[],this.providerList=[],this.dateFormat=c.a.FORMATS.DATE,this.manufacturingExpenseList=[],this.typeManufacturingExpenseList=[],this.manufacturingExpenseSubTypeList=[]}ngOnInit(){this.initForm(),this.initList()}initForm(){this.frmSelectProvider=this.fb.group({ddlmanufacturingexpense:[null,[s.q.required]],ddltypemanufacturingexpense:[null,[s.q.required]],ddlmanufacturingexpensesubtype:[null,[s.q.required]],ddlprovider:[null,[s.q.required]],ddlpaymentvouchertype:[null,[s.q.required]],serievoucher:[null,[s.q.required,this.formValidator.espacionBlanco]],numbervoucher:[null,[s.q.required,this.formValidator.espacionBlanco]],servicedate:[null,[s.q.required]],amount:[null,[s.q.required,this.formValidator.validateAmount]],description:[null,[s.q.required,this.formValidator.espacionBlanco]]})}initList(){Object(o.a)([this.lontecService.getProviderSearch({state:c.a.STATE_ENTITY.ENABLE}),this.lontecService.getParameterDetailSearch({parameterId:c.a.PARAMETERS.PAYMENT_VOUCHER_TYPE}),this.lontecService.getManufacturingExpenseSearch({state:c.a.STATE_ENTITY.ENABLE})]).subscribe(e=>{this.providerList=e[0],this.paymentVoucherTypeList=e[1],this.manufacturingExpenseList=e[2]},e=>{this.modalMessage.error(c.a.MESSAGE.ERROR_GET_DATA)},()=>{void 0!==this.index&&this.onSearch()})}onBlurAmount(e){isNaN(e)||""===e||this.frmSelectProvider.get("amount").setValue(Object(l.i)(e))}onChangeddlmanufacturingexpense(e){var t;null===(t=this.frmSelectProvider.get("ddltypeManufacturingexpense"))||void 0===t||t.setValue(null),this.typeManufacturingExpenseList=[],null!==e&&this.lontecService.getTypeManufacturingExpenseSearch({manufacturingExpenseId:Number(e)}).subscribe(e=>{this.typeManufacturingExpenseList=e},e=>{this.modalMessage.error(c.a.MESSAGE.ERROR_GET_DATA)})}onChangeddlmanufacturingexpensesubtype(e){var t;null===(t=this.frmSelectProvider.get("ddlmanufacturingexpensesubtype"))||void 0===t||t.setValue(null),this.manufacturingExpenseSubTypeList=[],null!==e&&this.lontecService.getManufacturingExpenseSubTypeSearch({typeManufacturingExpenseId:Number(e),state:c.a.STATE_ENTITY.ENABLE}).subscribe(e=>{this.manufacturingExpenseSubTypeList=e},e=>{this.modalMessage.error(c.a.MESSAGE.ERROR_GET_DATA)})}onSearch(){var e,t,n,i,r,a,c,o,s,u;let b=this.tableServiceProvider.find(e=>e.index==this.index);null===(e=this.frmSelectProvider.get("ddlmanufacturingexpense"))||void 0===e||e.setValue(b.manufacturingExpenseId),null===(t=this.frmSelectProvider.get("ddltypemanufacturingexpense"))||void 0===t||t.setValue(b.typeManufacturingExpenseId),null===(n=this.frmSelectProvider.get("ddlmanufacturingexpensesubtype"))||void 0===n||n.setValue(b.manufacturingExpenseSubTypeId),null===(i=this.frmSelectProvider.get("ddlpaymentvouchertype"))||void 0===i||i.setValue(b.paymentVoucherTypeId),null===(r=this.frmSelectProvider.get("serievoucher"))||void 0===r||r.setValue(b.serieVoucher),null===(a=this.frmSelectProvider.get("numbervoucher"))||void 0===a||a.setValue(b.numberVoucher),null===(c=this.frmSelectProvider.get("servicedate"))||void 0===c||c.setValue(b.serviceDate),null===(o=this.frmSelectProvider.get("amount"))||void 0===o||o.setValue(Object(l.i)(b.amount)),null===(s=this.frmSelectProvider.get("ddlprovider"))||void 0===s||s.setValue(b.providerId),null===(u=this.frmSelectProvider.get("description"))||void 0===u||u.setValue(b.description)}onAddServiceProvider(){let e;return 0===this.tableServiceProvider.length?this.tableServiceProvider.push({paymentVoucherTypeId:this.frmSelectProvider.value.ddlpaymentvouchertype,paymentVoucherTypeName:this.paymentVoucherTypeList.find(e=>Number(e.parameterDetailId)===Number(this.frmSelectProvider.value.ddlpaymentvouchertype)).fieldValue1,serieVoucher:this.frmSelectProvider.value.serievoucher,numberVoucher:this.frmSelectProvider.value.numbervoucher,amount:this.frmSelectProvider.value.amount,description:this.frmSelectProvider.value.description,providerId:this.frmSelectProvider.value.ddlprovider,businessName:this.providerList.find(e=>Number(e.providerId)===Number(this.frmSelectProvider.value.ddlprovider)).businessName,index:Math.random(),serviceDate:this.frmSelectProvider.value.servicedate,manufacturingExpenseId:this.frmSelectProvider.value.ddlmanufacturingexpense,manufacturingExpenseName:this.manufacturingExpenseList.find(e=>Number(e.manufacturingExpenseId)===Number(this.frmSelectProvider.value.ddlmanufacturingexpense)).manufacturingExpenseName,typeManufacturingExpenseName:this.typeManufacturingExpenseList.find(e=>Number(e.typeManufacturingExpenseId)===Number(this.frmSelectProvider.value.ddltypemanufacturingexpense)).typeManufacturingExpenseName,typeManufacturingExpenseId:this.frmSelectProvider.value.ddltypemanufacturingexpense,manufacturingExpenseSubTypeName:this.manufacturingExpenseSubTypeList.find(e=>Number(e.manufacturingExpenseSubTypeId)===Number(this.frmSelectProvider.value.ddlmanufacturingexpensesubtype)).manufacturingExpenseSubTypeName,manufacturingExpenseSubTypeId:this.frmSelectProvider.value.ddlmanufacturingexpensesubtype}):void 0!==this.index?(e=this.tableServiceProvider.find(e=>e.index==this.index),e.paymentVoucherTypeId=this.frmSelectProvider.value.ddlpaymentvouchertype,e.paymentVoucherTypeName=this.paymentVoucherTypeList.find(e=>Number(e.parameterDetailId)===Number(this.frmSelectProvider.value.ddlpaymentvouchertype)).fieldValue1,e.serieVoucher=this.frmSelectProvider.value.serievoucher,e.numberVoucher=this.frmSelectProvider.value.numbervoucher,e.amount=this.frmSelectProvider.value.amount,e.description=this.frmSelectProvider.value.description,e.providerId=this.frmSelectProvider.value.ddlprovider,e.businessName=this.providerList.find(e=>Number(e.providerId)===Number(this.frmSelectProvider.value.ddlprovider)).businessName,e.serviceDate=this.frmSelectProvider.value.servicedate,e.manufacturingExpenseId=this.frmSelectProvider.value.ddlmanufacturingexpense,e.manufacturingExpenseName=this.manufacturingExpenseList.find(e=>Number(e.manufacturingExpenseId)===Number(this.frmSelectProvider.value.ddlmanufacturingexpense)).manufacturingExpenseName,e.typeManufacturingExpenseId=this.frmSelectProvider.value.ddltypemanufacturingexpense,e.typeManufacturingExpenseName=this.typeManufacturingExpenseList.find(e=>Number(e.typeManufacturingExpenseId)===Number(this.frmSelectProvider.value.ddltypemanufacturingexpense)).typeManufacturingExpenseName,e.manufacturingExpenseSubTypeName=this.manufacturingExpenseSubTypeList.find(e=>Number(e.manufacturingExpenseSubTypeId)===Number(this.frmSelectProvider.value.ddlmanufacturingexpensesubtype)).manufacturingExpenseSubTypeName,e.manufacturingExpenseSubTypeId=this.frmSelectProvider.value.ddlmanufacturingexpensesubtype):this.tableServiceProvider.push({paymentVoucherTypeId:this.frmSelectProvider.value.ddlpaymentvouchertype,paymentVoucherTypeName:this.paymentVoucherTypeList.find(e=>Number(e.parameterDetailId)===Number(this.frmSelectProvider.value.ddlpaymentvouchertype)).fieldValue1,serieVoucher:this.frmSelectProvider.value.serievoucher,numberVoucher:this.frmSelectProvider.value.numbervoucher,amount:this.frmSelectProvider.value.amount,description:this.frmSelectProvider.value.description,providerId:this.frmSelectProvider.value.ddlprovider,businessName:this.providerList.find(e=>Number(e.providerId)===Number(this.frmSelectProvider.value.ddlprovider)).businessName,index:Math.random(),serviceDate:this.frmSelectProvider.value.servicedate,manufacturingExpenseId:this.frmSelectProvider.value.ddlmanufacturingexpense,manufacturingExpenseName:this.manufacturingExpenseList.find(e=>Number(e.manufacturingExpenseId)===Number(this.frmSelectProvider.value.ddlmanufacturingexpense)).manufacturingExpenseName,typeManufacturingExpenseName:this.typeManufacturingExpenseList.find(e=>Number(e.typeManufacturingExpenseId)===Number(this.frmSelectProvider.value.ddltypemanufacturingexpense)).typeManufacturingExpenseName,typeManufacturingExpenseId:this.frmSelectProvider.value.ddltypemanufacturingexpense,manufacturingExpenseSubTypeName:this.manufacturingExpenseSubTypeList.find(e=>Number(e.manufacturingExpenseSubTypeId)===Number(this.frmSelectProvider.value.ddlmanufacturingexpensesubtype)).manufacturingExpenseSubTypeName,manufacturingExpenseSubTypeId:this.frmSelectProvider.value.ddlmanufacturingexpensesubtype}),!0}onCancel(){this.modalRef.destroy()}onSubmit(){Object(l.j)(this.frmSelectProvider)?(this.onAddServiceProvider(),this.modalRef.destroy({tableServiceProvider:this.tableServiceProvider})):this.messageService.warning(c.a.MESSAGE.COMPLETE_FORM),this.modalRef.destroy()}}return e.\u0275fac=function(t){return new(t||e)(u.Ob(s.e),u.Ob(b.c),u.Ob(d.e),u.Ob(m.a),u.Ob(A.a),u.Ob(y.a))},e.\u0275cmp=u.Ib({type:e,selectors:[["app-select-provider"]],inputs:{index:"index",tableServiceProvider:"tableServiceProvider"},decls:75,vars:28,consts:[["nz-form","","nzLayout","vertical",3,"formGroup"],["nz-row",""],["nz-col","",3,"nzSm","nzXs"],["nzRequired","","nzFor","manufacturingexpense"],["nzErrorTip","Campo obligatorio."],["nzShowSearch","","formControlName","ddlmanufacturingexpense","nzPlaceHolder","Gasto Fabricaci\xf3n",3,"ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzRequired","","nzFor","typemanufacturingexpense"],["nzShowSearch","","formControlName","ddltypemanufacturingexpense","nzPlaceHolder","Tipo Gasto Fabricaci\xf3n",3,"ngModelChange"],["nzRequired","","nzFor","manufacturingexpensesubtype"],["nzShowSearch","","formControlName","ddlmanufacturingexpensesubtype","nzPlaceHolder","Sub Tipo Gasto Fabricaci\xf3n"],["nzRequired","","nzFor","provider"],["nzShowSearch","","formControlName","ddlprovider","nzPlaceHolder","Proveedor"],["nzRequired","","nzFor","paymentvouchertype"],["nzShowSearch","","formControlName","ddlpaymentvouchertype","nzPlaceHolder","Tipo Comprobante"],["nzRequired","","nzFor","serievoucher"],["nz-input","","formControlName","serievoucher","placeholder","Serie"],["nzRequired","","nzFor","numbervoucher"],["nz-input","","formControlName","numbervoucher","placeholder","N\xfamero"],["nzRequired","","nzFor","servicedate"],["formControlName","servicedate","nzPlaceHolder","Fecha Servicio",3,"nzFormat"],["nzRequired","","nzFor","amount"],[3,"nzErrorTip"],["nzAddOnBefore","S./"],["nz-input","","formControlName","amount","placeholder","Monto",1,"input-group",3,"blur"],["customValidatorAmount",""],["nzRequired","","nzFor","description"],["nz-input","","formControlName","description","placeholder","Descripci\xf3n"],[4,"nzModalFooter"],[3,"nzValue","nzLabel"],[4,"ngIf"],["nz-button","","nzType","default","nzDanger","",3,"click"],["nz-button","","nzType","primary",3,"click"]],template:function(e,t){if(1&e&&(u.Ub(0,"form",0),u.Ub(1,"div",1),u.Ub(2,"div",2),u.Ub(3,"nz-form-item"),u.Ub(4,"nz-form-label",3),u.Hc(5,"Gasto Fabricaci\xf3n"),u.Tb(),u.Ub(6,"nz-form-control",4),u.Ub(7,"nz-select",5),u.bc("ngModelChange",function(e){return t.onChangeddlmanufacturingexpense(e)}),u.Fc(8,X,1,2,"nz-option",6),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(9,"div",2),u.Ub(10,"nz-form-item"),u.Ub(11,"nz-form-label",7),u.Hc(12,"Tipo Gasto Fabricaci\xf3n"),u.Tb(),u.Ub(13,"nz-form-control",4),u.Ub(14,"nz-select",8),u.bc("ngModelChange",function(e){return t.onChangeddlmanufacturingexpensesubtype(e)}),u.Fc(15,j,1,2,"nz-option",6),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(16,"div",2),u.Ub(17,"nz-form-item"),u.Ub(18,"nz-form-label",9),u.Hc(19,"Sub Tipo Gasto Fabricaci\xf3n"),u.Tb(),u.Ub(20,"nz-form-control",4),u.Ub(21,"nz-select",10),u.Fc(22,B,1,2,"nz-option",6),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(23,"div",1),u.Ub(24,"div",2),u.Ub(25,"nz-form-item"),u.Ub(26,"nz-form-label",11),u.Hc(27,"Proveedor"),u.Tb(),u.Ub(28,"nz-form-control",4),u.Ub(29,"nz-select",12),u.Fc(30,$,1,2,"nz-option",6),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(31,"div",1),u.Ub(32,"div",2),u.Ub(33,"nz-form-item"),u.Ub(34,"nz-form-label",13),u.Hc(35,"Tipo Comprobante"),u.Tb(),u.Ub(36,"nz-form-control",4),u.Ub(37,"nz-select",14),u.Fc(38,Y,1,2,"nz-option",6),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(39,"div",2),u.Ub(40,"nz-form-item"),u.Ub(41,"nz-form-label",15),u.Hc(42,"Serie"),u.Tb(),u.Ub(43,"nz-form-control",4),u.Pb(44,"input",16),u.Tb(),u.Tb(),u.Tb(),u.Ub(45,"div",2),u.Ub(46,"nz-form-item"),u.Ub(47,"nz-form-label",17),u.Hc(48,"N\xfamero"),u.Tb(),u.Ub(49,"nz-form-control",4),u.Pb(50,"input",18),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(51,"div",1),u.Ub(52,"div",2),u.Ub(53,"nz-form-item"),u.Ub(54,"nz-form-label",19),u.Hc(55,"Fecha Servicio"),u.Tb(),u.Ub(56,"nz-form-control",4),u.Pb(57,"nz-date-picker",20),u.Tb(),u.Tb(),u.Tb(),u.Ub(58,"div",2),u.Ub(59,"nz-form-item"),u.Ub(60,"nz-form-label",21),u.Hc(61,"Monto"),u.Tb(),u.Ub(62,"nz-form-control",22),u.Ub(63,"nz-input-group",23),u.Ub(64,"input",24),u.bc("blur",function(e){return t.onBlurAmount(e.target.value)}),u.Tb(),u.Fc(65,J,2,2,"ng-template",null,25,u.Gc),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(67,"div",1),u.Ub(68,"div",2),u.Ub(69,"nz-form-item"),u.Ub(70,"nz-form-label",26),u.Hc(71,"Descripci\xf3n"),u.Tb(),u.Ub(72,"nz-form-control",4),u.Pb(73,"textarea",27),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Fc(74,Q,5,0,"div",28)),2&e){const e=u.uc(66);u.mc("formGroup",t.frmSelectProvider),u.Ab(2),u.mc("nzSm",8)("nzXs",24),u.Ab(6),u.mc("ngForOf",t.manufacturingExpenseList),u.Ab(1),u.mc("nzSm",8)("nzXs",24),u.Ab(6),u.mc("ngForOf",t.typeManufacturingExpenseList),u.Ab(1),u.mc("nzSm",8)("nzXs",24),u.Ab(6),u.mc("ngForOf",t.manufacturingExpenseSubTypeList),u.Ab(2),u.mc("nzSm",24)("nzXs",24),u.Ab(6),u.mc("ngForOf",t.providerList),u.Ab(2),u.mc("nzSm",8)("nzXs",24),u.Ab(6),u.mc("ngForOf",t.paymentVoucherTypeList),u.Ab(1),u.mc("nzSm",8)("nzXs",24),u.Ab(6),u.mc("nzSm",8)("nzXs",24),u.Ab(7),u.mc("nzSm",8)("nzXs",24),u.Ab(5),u.mc("nzFormat",t.dateFormat),u.Ab(1),u.mc("nzSm",8)("nzXs",24),u.Ab(4),u.mc("nzErrorTip",e),u.Ab(6),u.mc("nzSm",24)("nzXs",24)}},directives:[s.r,s.n,p.b,s.i,h.c,h.a,p.c,p.d,p.a,x.d,s.m,s.h,N.m,v.b,s.d,C.b,z.a,v.c,b.a,x.a,N.n,f.a,T.a],styles:[""]}),e})();var ee=n("haRT"),te=n("UZXO");function ne(e,t){1&e&&(u.Sb(0),u.Hc(1," Debe ingresar una cantidad correcta. "),u.Rb())}function ie(e,t){1&e&&u.Fc(0,ne,2,0,"ng-container",13),2&e&&u.mc("ngIf",t.$implicit.hasError("optionalValidateAmount"))}function re(e,t){if(1&e){const e=u.Vb();u.Ub(0,"tr"),u.Ub(1,"td",8),u.bc("nzCheckedChange",function(n){u.vc(e);const i=t.$implicit;return u.ec().onUpdateCheckedSet(i.technicalId,n)}),u.Tb(),u.Ub(2,"td",9),u.Hc(3),u.Tb(),u.Ub(4,"td",9),u.Hc(5),u.Tb(),u.Ub(6,"td",9),u.Hc(7),u.fc(8,"amountFormat"),u.Tb(),u.Ub(9,"td",9),u.Ub(10,"nz-form-control",10),u.Ub(11,"input",11),u.bc("ngModelChange",function(e){return t.$implicit.hour=e}),u.Tb(),u.Fc(12,ie,1,1,"ng-template",null,12,u.Gc),u.Tb(),u.Tb(),u.Tb()}if(2&e){const e=t.$implicit,n=u.uc(13),i=u.ec();u.Ab(1),u.mc("nzChecked",i.setCheckdId.has(e.technicalId)),u.Ab(2),u.Mc("",e.firstName," ",e.secondName," ",e.fatherLastName," ",e.motherLastName,""),u.Ab(2),u.Ic(e.phoneNumber),u.Ab(2),u.Ic(u.gc(8,11,e.cost)),u.Ab(3),u.mc("nzErrorTip",n),u.Ab(1),u.mc("formControlName",e.controlInstance)("ngModel",e.hour),u.Bb("id",e.technicalId)}}function ae(e,t){if(1&e){const e=u.Vb();u.Ub(0,"div"),u.Ub(1,"button",14),u.bc("click",function(){return u.vc(e),u.ec().onCancel()}),u.Hc(2,"Cancelar"),u.Tb(),u.Ub(3,"button",15),u.bc("click",function(){return u.vc(e),u.ec().onSubmit()}),u.Hc(4,"Aceptar"),u.Tb(),u.Tb()}}let ce=(()=>{class e{constructor(e,t,n,i,r,a){this.fb=e,this.modalRef=t,this.messageService=n,this.formValidator=i,this.lontecService=r,this.modalMessage=a,this.tableTechnical=[],this.tableTechnicalLoading=!1,this.setCheckdId=new Set}ngOnInit(){this.initForm(),this.initList()}initForm(){this.frmSelectTechnical=this.fb.group({})}initList(){Object(o.a)([this.lontecService.getTechnicalSearch({state:c.a.STATE_ENTITY.ENABLE})]).subscribe(e=>{this.tableTechnical=e[0]},e=>{this.modalMessage.error(c.a.MESSAGE.ERROR_GET_DATA)},()=>{this.onSetHourControl(this.tableTechnical)})}onUpdateCheckedSet(e,t){var n;t?(this.setCheckdId.add(e),this.frmSelectTechnical.controls["hour"+e].enable()):(this.setCheckdId.delete(e),null===(n=this.frmSelectTechnical.controls["hour"+e])||void 0===n||n.setValue(null),this.frmSelectTechnical.controls["hour"+e].disable())}onSetHourControl(e){this.tableTechnical=[];for(let t of e){t.controlInstance="hour"+t.technicalId;let e=this.tableTechnical.push(t);this.frmSelectTechnical.addControl(this.tableTechnical[e-1].controlInstance,new s.f({value:"",disabled:!0},{validators:[this.formValidator.optionalValidateAmount],updateOn:"blur"}))}this.tableTechnical.forEach(e=>{e.hour=null})}onAddServiceTechnical(){let e,t=!0;for(var n of Array.from(this.setCheckdId.values()))0!==this.tableServiceTechnical.length?(e=this.tableServiceTechnical.find(e=>Number(e.technicalId)===Number(n)),e?(this.messageService.warning("El t\xe9cnico seleccionado, ya se encuentra registrado"),t=!1):(e=this.tableTechnical.find(e=>Number(e.technicalId)===Number(n)),this.tableServiceTechnical.push({technicalId:e.technicalId,firstName:e.firstName,secondName:e.secondName,fatherLastName:e.fatherLastName,motherLastName:e.motherLastName,phoneNumber:e.phoneNumber,cost:e.cost,hour:e.hour,index:Math.random()}))):(e=this.tableTechnical.find(e=>Number(e.technicalId)===Number(n)),this.tableServiceTechnical.push({technicalId:e.technicalId,firstName:e.firstName,secondName:e.secondName,fatherLastName:e.fatherLastName,motherLastName:e.motherLastName,phoneNumber:e.phoneNumber,cost:e.cost,hour:e.hour,index:Math.random()}));return t}onCancel(){this.modalRef.destroy()}onSubmit(){this.onAddServiceTechnical()&&this.modalRef.destroy({tableServiceTechnical:this.tableServiceTechnical})}}return e.\u0275fac=function(t){return new(t||e)(u.Ob(s.e),u.Ob(b.c),u.Ob(d.e),u.Ob(m.a),u.Ob(A.a),u.Ob(y.a))},e.\u0275cmp=u.Ib({type:e,selectors:[["app-select-technical"]],inputs:{tableServiceTechnical:"tableServiceTechnical"},decls:18,vars:13,consts:[["nz-form","","nzLayout","vertical",3,"formGroup"],["nz-row",""],["nz-col","",3,"nzSm","nzXs"],["nzSize","small","nzShowSizeChanger","",3,"nzFrontPagination","nzLoading","nzData"],[1,"tr-color",3,"nzAlign"],[1,"tr-color",3,"nzAlign","nzWidth"],[4,"ngFor","ngForOf"],[4,"nzModalFooter"],["nzAlign","center",3,"nzChecked","nzCheckedChange"],["nzAlign","center"],[3,"nzErrorTip"],["nz-input","",3,"formControlName","ngModel","ngModelChange"],["customValidatorHour",""],[4,"ngIf"],["nz-button","","nzType","default","nzDanger","",3,"click"],["nz-button","","nzType","primary",3,"click"]],template:function(e,t){1&e&&(u.Ub(0,"form",0),u.Ub(1,"div",1),u.Ub(2,"div",2),u.Ub(3,"nz-table",3),u.Ub(4,"thead"),u.Ub(5,"tr"),u.Pb(6,"th",4),u.Ub(7,"th",4),u.Hc(8,"T\xe9cnico"),u.Tb(),u.Ub(9,"th",4),u.Hc(10,"T\xe9lefono"),u.Tb(),u.Ub(11,"th",4),u.Hc(12,"Costo x Hora"),u.Tb(),u.Ub(13,"th",5),u.Hc(14,"Horas"),u.Tb(),u.Tb(),u.Tb(),u.Ub(15,"tbody"),u.Fc(16,re,14,13,"tr",6),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Fc(17,ae,5,0,"div",7)),2&e&&(u.mc("formGroup",t.frmSelectTechnical),u.Ab(2),u.mc("nzSm",24)("nzXs",24),u.Ab(1),u.mc("nzFrontPagination",!1)("nzLoading",t.tableTechnicalLoading)("nzData",t.tableTechnical),u.Ab(3),u.mc("nzAlign","center"),u.Ab(1),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center")("nzWidth","60px"),u.Ab(3),u.mc("ngForOf",t.tableTechnical))},directives:[s.r,s.n,p.b,s.i,h.c,h.a,ee.c,ee.j,ee.k,ee.b,ee.i,ee.a,ee.f,N.m,b.a,ee.g,p.a,v.b,s.d,s.m,s.h,N.n,f.a,T.a,z.a],pipes:[te.a],styles:[""]}),e})();var oe=n("66zS"),se=n("W4B1");function le(e,t){if(1&e&&u.Pb(0,"nz-option",47),2&e){const e=t.$implicit;u.mc("nzValue",e.supervisorId)("nzLabel",e.fullName)}}function ue(e,t){1&e&&u.Hc(0),2&e&&u.Jc(" and ",t.$implicit.length," more selected ")}function be(e,t){1&e&&(u.Sb(0),u.Hc(1," Debe ingresar s\xf3lo n\xfameros. "),u.Rb())}function me(e,t){1&e&&u.Fc(0,be,2,0,"ng-container",48),2&e&&u.mc("ngIf",t.$implicit.hasError("optionalValidateAmount"))}function de(e,t){1&e&&(u.Sb(0),u.Hc(1," Debe ingresar s\xf3lo n\xfameros. "),u.Rb())}function pe(e,t){1&e&&u.Fc(0,de,2,0,"ng-container",48),2&e&&u.mc("ngIf",t.$implicit.hasError("optionalValidateAmount"))}function he(e,t){if(1&e&&u.Pb(0,"nz-option",47),2&e){const e=t.$implicit;u.mc("nzValue",e.manufacturingExpenseId)("nzLabel",e.manufacturingExpenseName)}}function ve(e,t){if(1&e&&u.Pb(0,"nz-option",47),2&e){const e=t.$implicit;u.mc("nzValue",e.typeManufacturingExpenseId)("nzLabel",e.typeManufacturingExpenseName)}}function fe(e,t){if(1&e){const e=u.Vb();u.Ub(0,"tr"),u.Ub(1,"td",49),u.Hc(2),u.Tb(),u.Ub(3,"td",49),u.Hc(4),u.Tb(),u.Ub(5,"td",49),u.Hc(6),u.fc(7,"amountFormat"),u.Tb(),u.Ub(8,"td",49),u.Hc(9),u.fc(10,"amountFormat"),u.Tb(),u.Ub(11,"td",49),u.Hc(12),u.fc(13,"amountFormat"),u.Tb(),u.Ub(14,"td",49),u.Ub(15,"button",50),u.bc("click",function(){u.vc(e);const n=t.$implicit;return u.ec().onDeleteServiceTechnical(n.index)}),u.Pb(16,"i",44),u.Tb(),u.Tb(),u.Tb()}if(2&e){const e=t.$implicit;u.Ab(2),u.Mc("",e.firstName," ",e.secondName," ",e.fatherLastName," ",e.motherLastName,""),u.Ab(2),u.Ic(e.phoneNumber),u.Ab(2),u.Ic(u.gc(7,8,e.cost)),u.Ab(3),u.Ic(u.gc(10,10,e.hour)),u.Ab(3),u.Ic(u.gc(13,12,e.cost*e.hour))}}function Te(e,t){1&e&&(u.Ub(0,"div",52),u.Pb(1,"i",53),u.Ub(2,"p"),u.Hc(3,"No hay Datos"),u.Tb(),u.Tb())}function ze(e,t){if(1&e&&u.Fc(0,Te,4,0,"div",51),2&e){const e=u.ec();u.mc("ngIf",0===e.tableServiceTechnical.length)}}function ge(e,t){if(1&e){const e=u.Vb();u.Ub(0,"button",54),u.bc("click",function(){return u.vc(e),u.ec().onOpenSelectTechnicalModal()}),u.Pb(1,"i",55),u.Hc(2," Agregar"),u.Tb()}}function Se(e,t){if(1&e){const e=u.Vb();u.Ub(0,"tr"),u.Ub(1,"td",49),u.Hc(2),u.Tb(),u.Ub(3,"td",49),u.Hc(4),u.Tb(),u.Ub(5,"td",49),u.Hc(6),u.fc(7,"date"),u.Tb(),u.Ub(8,"td",49),u.Hc(9),u.Tb(),u.Ub(10,"td",49),u.Hc(11),u.Tb(),u.Ub(12,"td",49),u.Hc(13),u.Tb(),u.Ub(14,"td",49),u.Hc(15),u.Tb(),u.Ub(16,"td",49),u.Hc(17),u.Tb(),u.Ub(18,"td",49),u.Hc(19),u.fc(20,"amountFormat"),u.Tb(),u.Ub(21,"td",49),u.Hc(22),u.fc(23,"amountFormat"),u.Tb(),u.Ub(24,"td",49),u.Hc(25),u.fc(26,"amountFormat"),u.Tb(),u.Ub(27,"td",49),u.Ub(28,"button",56),u.bc("click",function(){u.vc(e);const n=t.$implicit;return u.ec().onOpenSelectConsumableModal(n.index)}),u.Pb(29,"i",57),u.Tb(),u.Tb(),u.Ub(30,"td",49),u.Ub(31,"button",50),u.bc("click",function(){u.vc(e);const n=t.$implicit;return u.ec().onDeleteServiceConsumable(n.index)}),u.Pb(32,"i",44),u.Tb(),u.Tb(),u.Tb()}if(2&e){const e=t.$implicit;u.Ab(2),u.Ic(e.paymentVoucherTypeName),u.Ab(2),u.Kc("",e.serieVoucher," - ",e.numberVoucher,""),u.Ab(2),u.Ic(u.hc(7,12,e.purchaseDate,"dd/MM/yyyy h:mm a")),u.Ab(3),u.Ic(e.businessName),u.Ab(2),u.Ic(e.manufacturingExpenseName),u.Ab(2),u.Ic(e.typeManufacturingExpenseName),u.Ab(2),u.Ic(e.manufacturingExpenseSubTypeName),u.Ab(2),u.Ic(e.consumableName),u.Ab(2),u.Ic(u.gc(20,15,e.amount)),u.Ab(3),u.Ic(u.gc(23,17,e.quantity)),u.Ab(3),u.Ic(u.gc(26,19,e.quantity*e.amount))}}function ye(e,t){1&e&&(u.Ub(0,"div",52),u.Pb(1,"i",53),u.Ub(2,"p"),u.Hc(3,"No hay Datos"),u.Tb(),u.Tb())}function Ae(e,t){if(1&e&&u.Fc(0,ye,4,0,"div",51),2&e){const e=u.ec();u.mc("ngIf",0===e.tableServiceConsumable.length)}}function Ee(e,t){if(1&e){const e=u.Vb();u.Ub(0,"button",54),u.bc("click",function(){return u.vc(e),u.ec().onOpenSelectConsumableModal()}),u.Pb(1,"i",55),u.Hc(2," Agregar"),u.Tb()}}function Ue(e,t){if(1&e){const e=u.Vb();u.Ub(0,"tr"),u.Ub(1,"td",49),u.Hc(2),u.Tb(),u.Ub(3,"td",49),u.Hc(4),u.Tb(),u.Ub(5,"td",49),u.Hc(6),u.fc(7,"date"),u.Tb(),u.Ub(8,"td",49),u.Hc(9),u.Tb(),u.Ub(10,"td",49),u.Hc(11),u.Tb(),u.Ub(12,"td",49),u.Hc(13),u.Tb(),u.Ub(14,"td",49),u.Hc(15),u.Tb(),u.Ub(16,"td",49),u.Hc(17),u.Tb(),u.Ub(18,"td",49),u.Hc(19),u.fc(20,"amountFormat"),u.Tb(),u.Ub(21,"td",49),u.Ub(22,"button",56),u.bc("click",function(){u.vc(e);const n=t.$implicit;return u.ec().onOpenSelectProviderModal(n.index)}),u.Pb(23,"i",57),u.Tb(),u.Tb(),u.Ub(24,"td",49),u.Ub(25,"button",50),u.bc("click",function(){u.vc(e);const n=t.$implicit;return u.ec().onDeleteServiceProvider(n.index)}),u.Pb(26,"i",44),u.Tb(),u.Tb(),u.Tb()}if(2&e){const e=t.$implicit;u.Ab(2),u.Ic(e.paymentVoucherTypeName),u.Ab(2),u.Kc("",e.serieVoucher," - ",e.numberVoucher,""),u.Ab(2),u.Ic(u.hc(7,10,e.serviceDate,"dd/MM/yyyy h:mm a")),u.Ab(3),u.Ic(e.businessName),u.Ab(2),u.Ic(e.manufacturingExpenseName),u.Ab(2),u.Ic(e.typeManufacturingExpenseName),u.Ab(2),u.Ic(e.manufacturingExpenseSubTypeName),u.Ab(2),u.Ic(e.description),u.Ab(2),u.Ic(u.gc(20,13,e.amount))}}function xe(e,t){1&e&&(u.Ub(0,"div",52),u.Pb(1,"i",53),u.Ub(2,"p"),u.Hc(3,"No hay Datos"),u.Tb(),u.Tb())}function Ne(e,t){if(1&e&&u.Fc(0,xe,4,0,"div",51),2&e){const e=u.ec();u.mc("ngIf",0===e.tableServiceProvider.length)}}function Ce(e,t){if(1&e){const e=u.Vb();u.Ub(0,"button",54),u.bc("click",function(){return u.vc(e),u.ec().onOpenSelectProviderModal()}),u.Pb(1,"i",55),u.Hc(2," Agregar"),u.Tb()}}let Ie=(()=>{class e{constructor(e,t,n,i,r,a,o){this.fb=e,this.lontecService=t,this.modalMessage=n,this.modalService=i,this.formValidator=r,this.messageService=a,this.router=o,this.supervisorList=[],this.tableServiceTechnical=[],this.tableServiceConsumable=[],this.tableServiceProvider=[],this.manufacturingExpenseList=[],this.typeManufacturingExpenseList=[],this.state=c.a.STATE_ENTITY.ENABLE,this.dateFormat=c.a.FORMATS.DATE,this.today=new Date,this.loadingSubmit=!1}ngOnChanges(){0!==Number(this.tab[this.tabIndex].serviceActivityId)?this.onSearch():this.onClearForm()}ngOnInit(){this.initForm(),this.initList()}initForm(){this.frmTemplateActivity=this.fb.group({ddlsupervisor:[null,[s.q.required]],startdate:[null,[s.q.required]],enddate:[null,[s.q.required]],description:[null,[s.q.required,this.formValidator.espacionBlanco]],costkilometer:[null,[this.formValidator.optionalValidateAmount]],kilometertraveled:[null,[this.formValidator.optionalValidateAmount]],travelcost:[{value:"",disabled:!0}],ddlmanufacturingexpense:[null,[s.q.required]],ddltypeManufacturingexpense:[null,[s.q.required]]})}initList(){Object(o.a)([this.lontecService.getSupervisorSearch({state:c.a.STATE_ENTITY.ENABLE}),this.lontecService.getManufacturingExpenseSearch({state:c.a.STATE_ENTITY.ENABLE})]).subscribe(e=>{this.supervisorList=e[0],this.manufacturingExpenseList=e[1]},e=>{this.modalMessage.error(c.a.MESSAGE.ERROR_GET_DATA)},()=>{this.supervisorList.forEach(e=>{e.fullName=e.firstName+" "+e.secondName+" "+e.fatherLastName+" "+e.motherLastName})})}onClearForm(){this.frmTemplateActivity.reset()}onBlurCostKilometer(e){var t,n;if(isNaN(e)||""===e)null===(n=this.frmTemplateActivity.get("travelcost"))||void 0===n||n.setValue(null);else{this.frmTemplateActivity.get("costkilometer").setValue(Object(l.i)(e));let n=this.frmTemplateActivity.value.kilometertraveled;isNaN(n)||""===n?null===(t=this.frmTemplateActivity.get("travelcost"))||void 0===t||t.setValue(null):this.frmTemplateActivity.get("travelcost").setValue(Object(l.i)(Number(e)*Number(n)))}}onBlurKilometerTraveled(e){var t,n;if(isNaN(e)||""===e)null===(n=this.frmTemplateActivity.get("travelcost"))||void 0===n||n.setValue(null);else{this.frmTemplateActivity.get("kilometertraveled").setValue(Object(l.i)(e));let n=this.frmTemplateActivity.value.costkilometer;isNaN(n)||""===n?null===(t=this.frmTemplateActivity.get("travelcost"))||void 0===t||t.setValue(null):this.frmTemplateActivity.get("travelcost").setValue(Object(l.i)(Number(e)*Number(n)))}}onChangeddlmanufacturingexpense(e){var t;null===(t=this.frmTemplateActivity.get("ddltypeManufacturingexpense"))||void 0===t||t.setValue(null),this.typeManufacturingExpenseList=[],null!==e&&this.lontecService.getTypeManufacturingExpenseSearch({manufacturingExpenseId:Number(e)}).subscribe(e=>{this.typeManufacturingExpenseList=e},e=>{this.modalMessage.error(c.a.MESSAGE.ERROR_GET_DATA)})}onOpenSelectTechnicalModal(){this.modalService.create({nzTitle:c.a.MODAL_TITLE.SELECT_TECHNICAL,nzClosable:!1,nzWidth:"900px",nzContent:ce,nzComponentParams:{tableServiceTechnical:this.tableServiceTechnical}}).afterClose.subscribe(e=>{void 0!==e&&(this.tableServiceTechnical=e.tableServiceTechnical)})}onOpenSelectConsumableModal(e){this.modalService.create({nzTitle:c.a.MODAL_TITLE.SELECT_CONSUMABLE,nzClosable:!1,nzWidth:"1200px",nzContent:w,nzComponentParams:{tableServiceConsumable:this.tableServiceConsumable,index:e}}).afterClose.subscribe(e=>{void 0!==e&&(this.tableServiceConsumable=e.tableServiceConsumable)})}onOpenSelectProviderModal(e){this.modalService.create({nzTitle:c.a.MODAL_TITLE.SELECT_PROVIDER,nzClosable:!1,nzWidth:"1200px",nzContent:Z,nzComponentParams:{tableServiceProvider:this.tableServiceProvider,index:e}}).afterClose.subscribe(e=>{void 0!==e&&(this.tableServiceProvider=e.tableServiceProvider)})}onDeleteServiceTechnical(e){this.modalMessage.confirm(c.a.MESSAGE.CONFIRM_QUESTION,()=>{let t=this.tableServiceTechnical.findIndex(t=>t.index==e);this.tableServiceTechnical.splice(t,1)})}onDeleteServiceConsumable(e){this.modalMessage.confirm(c.a.MESSAGE.CONFIRM_QUESTION,()=>{let t=this.tableServiceConsumable.findIndex(t=>t.index==e);this.tableServiceConsumable.splice(t,1)})}onDeleteServiceProvider(e){this.modalMessage.confirm(c.a.MESSAGE.CONFIRM_QUESTION,()=>{let t=this.tableServiceProvider.findIndex(t=>t.index==e);this.tableServiceProvider.splice(t,1)})}onSearch(){this.lontecService.getServiceActivityIntegratorById(this.tab[this.tabIndex].serviceActivityId).subscribe(e=>{var t,n,i,r,a,c,o,s,u;null===(t=this.frmTemplateActivity.get("startdate"))||void 0===t||t.setValue(e.startDate),null===(n=this.frmTemplateActivity.get("enddate"))||void 0===n||n.setValue(e.endDate);let b,m=e.costKilometer,d=e.kilometerTraveled;if(null!==m&&null!==d){let t=Number(m)*Number(d);null===(i=this.frmTemplateActivity.get("costkilometer"))||void 0===i||i.setValue(Object(l.i)(e.costKilometer)),null===(r=this.frmTemplateActivity.get("kilometertraveled"))||void 0===r||r.setValue(Object(l.i)(e.kilometerTraveled)),null===(a=this.frmTemplateActivity.get("travelcost"))||void 0===a||a.setValue(Object(l.i)(t))}null===(c=this.frmTemplateActivity.get("startdate"))||void 0===c||c.setValue(e.startDate),null===(o=this.frmTemplateActivity.get("description"))||void 0===o||o.setValue(e.description),null===(s=this.frmTemplateActivity.get("startdate"))||void 0===s||s.setValue(e.startDate),e.serviceActivitySupervisor.length>0&&(null===(u=this.frmTemplateActivity.get("ddlsupervisor"))||void 0===u||u.setValue(e.serviceActivitySupervisor.map(e=>e.supervisorId))),this.tableServiceTechnical=e.serviceActivityTechnical,this.tableServiceTechnical.length>0&&this.tableServiceTechnical.forEach(e=>{e.index=Math.random(),b=e.typeManufacturingExpenseId}),this.tableServiceConsumable=e.serviceActivityConsumable,this.tableServiceConsumable.length>0&&this.tableServiceConsumable.forEach(e=>{e.index=Math.random()}),this.tableServiceProvider=e.serviceActivityProvider,this.tableServiceProvider.length>0&&this.tableServiceProvider.forEach(e=>{e.index=Math.random()}),void 0!==b&&this.onSetTypeManufacturingExpense(Number(b))},e=>{this.modalMessage.error(c.a.MESSAGE.ERROR_GET_DATA)})}onSetTypeManufacturingExpense(e){this.lontecService.getTypeManufacturingExpenseById(e).subscribe(t=>{var n,i;null===(n=this.frmTemplateActivity.get("ddlmanufacturingexpense"))||void 0===n||n.setValue(t.manufacturingExpenseId),null===(i=this.frmTemplateActivity.get("ddltypeManufacturingexpense"))||void 0===i||i.setValue(e)})}setCommand(){return{serviceActivityId:this.tab[this.tabIndex].serviceActivityId,serviceActivityName:this.tab[this.tabIndex].activityName,startDate:this.frmTemplateActivity.value.startdate,endDate:this.frmTemplateActivity.value.enddate,costKilometer:this.frmTemplateActivity.value.costkilometer,kilometerTraveled:this.frmTemplateActivity.value.kilometertraveled,description:this.frmTemplateActivity.value.description,state:this.state,serviceId:this.serviceId,registerUserId:Object(l.d)(),registerUserFullname:Object(l.c)(),serviceActivitySupervisor:this.setCommandServiceSupervisor(),serviceActivityTechnical:this.setCommandServiceTechnical(),serviceActivityConsumable:this.setCommanServiceActivityConsumable(),serviceActivityProvider:this.setCommandServiceActivityProvider()}}setCommandServiceSupervisor(){let e=[],t=Object(l.a)(this.frmTemplateActivity.value.ddlsupervisor).split(",");for(let n of t)e.push({serviceActivitySupervisorId:0,cost:this.supervisorList.find(e=>Number(e.supervisorId)===Number(n)).cost,hour:0,supervisorId:Number(n),serviceActivityId:this.tab[this.tabIndex].serviceActivityId,registerUserId:Object(l.d)(),registerUserFullname:Object(l.c)()});return e}setCommandServiceTechnical(){let e=[];return this.tableServiceTechnical.forEach(t=>{e.push({serviceActivityTechnicalId:0,cost:t.cost,hour:t.hour,technicalId:t.technicalId,serviceActivityId:this.tab[this.tabIndex].serviceActivityId,typeManufacturingExpenseId:this.frmTemplateActivity.value.ddltypeManufacturingexpense,registerUserId:Object(l.d)(),registerUserFullname:Object(l.c)()})}),e}setCommanServiceActivityConsumable(){let e=[];return this.tableServiceConsumable.forEach(t=>{e.push({serviceActivityConsumableId:0,purchaseDate:t.purchaseDate,serieVoucher:t.serieVoucher,numberVoucher:t.numberVoucher,consumableName:t.consumableName,quantity:t.quantity,amount:t.amount,providerId:t.providerId,paymentVoucherTypeId:t.paymentVoucherTypeId,serviceActivityId:this.tab[this.tabIndex].serviceActivityId,manufacturingExpenseSubTypeId:t.manufacturingExpenseSubTypeId,registerUserId:Object(l.d)(),registerUserFullname:Object(l.c)()})}),e}setCommandServiceActivityProvider(){let e=[];return this.tableServiceProvider.forEach(t=>{e.push({serviceActivityProviderId:0,serviceDate:t.serviceDate,serieVoucher:t.serieVoucher,numberVoucher:t.numberVoucher,description:t.description,amount:t.amount,providerId:t.providerId,paymentVoucherTypeId:t.paymentVoucherTypeId,serviceActivityId:this.tab[this.tabIndex].serviceActivityId,manufacturingExpenseSubTypeId:t.manufacturingExpenseSubTypeId,registerUserId:Object(l.d)(),registerUserFullname:Object(l.c)()})}),e}onValidateServiceState(){return Object(a.a)(this,void 0,void 0,function*(){let e=!0;return yield this.lontecService.getServiceById(this.serviceId).toPromise().then(t=>{t.state===c.a.SERVICE_STATE.CLOSED&&(this.messageService.warning("El servicio tiene el estado CERRADO, no se puede realizar la modificaci\xf3n de actividades"),e=!1)}).catch(()=>{this.modalMessage.error(c.a.MESSAGE.ERROR_GET_DATA)}),e})}onCancel(){this.router.navigate(["services-tray"])}onSubmit(){return Object(a.a)(this,void 0,void 0,function*(){if(Object(l.j)(this.frmTemplateActivity)){if(!(yield this.onValidateServiceState()))return;this.modalMessage.confirm(c.a.MESSAGE.CONFIRM_QUESTION,()=>{this.loadingSubmit=!0,this.lontecService.postServiceActivity(this.setCommand()).subscribe(()=>{this.loadingSubmit=!1,this.messageService.success(c.a.MESSAGE.SUCCESS_SAVE),this.onCancel()},e=>{this.loadingSubmit=!1,this.modalMessage.error(c.a.MESSAGE.ERROR)})})}else this.messageService.warning(c.a.MESSAGE.CONFIRM_QUESTION)})}}return e.\u0275fac=function(t){return new(t||e)(u.Ob(s.e),u.Ob(A.a),u.Ob(y.a),u.Ob(b.d),u.Ob(m.a),u.Ob(d.e),u.Ob(r.d))},e.\u0275cmp=u.Ib({type:e,selectors:[["app-template-activity"]],inputs:{tab:"tab",serviceId:"serviceId",tabIndex:"tabIndex"},features:[u.yb],decls:168,vars:81,consts:[["nz-form","","nzLayout","vertical",3,"formGroup"],["nz-row",""],["nz-col","",3,"nzSm","nzXs"],["nzRequired","","nzFor","supervisor"],["nzErrorTip","Campo obligatorio."],["nzShowSearch","","formControlName","ddlsupervisor","nzPlaceHolder","Supervisor","nzMode","multiple",3,"nzMaxTagCount","nzMaxTagPlaceholder"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["tagPlaceHolder",""],["nzRequired","","nzFor","startdate"],["formControlName","startdate","nzPlaceHolder","Fecha Inicio",3,"nzFormat"],["nzRequired","","nzFor","enddate"],["formControlName","enddate","nzPlaceHolder","Fecha Fin",3,"nzFormat"],["nzFor","costkilometer"],[3,"nzErrorTip"],["nzAddOnBefore","S./"],["nz-input","","formControlName","costkilometer","placeholder","Costo por km",1,"input-group",3,"blur"],["customValidatorCostKilometer",""],["nzFor","kilometertraveled"],["nz-input","","formControlName","kilometertraveled","placeholder","Km recorrido",3,"blur"],["customValidatorKilometerTraveled",""],["nzFor","travelcost"],["nz-input","","formControlName","travelcost","placeholder","Costo Recorrido",1,"input-group"],["nzRequired","","nzFor","description"],["nz-input","","formControlName","description","placeholder","Detalle Actividad"],["nzTitle","T\xe9cnicos",1,"mt-10",3,"nzExtra"],["nzRequired","","nzFor","manufacturingexpense"],["nzShowSearch","","formControlName","ddlmanufacturingexpense","nzPlaceHolder","Gasto Fabricaci\xf3n",3,"ngModelChange"],["nzRequired","","nzFor","typemanufacturingexpense"],["nzShowSearch","","formControlName","ddltypeManufacturingexpense","nzPlaceHolder","Tipo Gasto Fabricaci\xf3n"],["nz-row","",1,"ant-form-item"],["nzSize","small","nzShowSizeChanger","",3,"nzFrontPagination","nzNoResult","nzData"],[1,"tr-color",3,"nzAlign"],[1,"tr-color",3,"nzAlign","nzWidth"],[4,"ngFor","ngForOf"],["emptyServiceTechnical",""],["AddButtonServiceTechnical",""],["nzTitle","Consumibles",1,"mt-10",3,"nzExtra"],["emptyServiceConsumable",""],["AddButtonServiceConsumable",""],["nzTitle","Proveedores",1,"mt-10",3,"nzExtra"],["emptyServiceProvider",""],["AddButtonProvider",""],[1,"text-center","mt-10"],["nz-button","","nzType","primary","nzDanger","",2,"margin-left","5px","margin-right","5px",3,"click"],["nz-icon","","nzType","close","nzTheme","outline"],["nz-button","","nzType","primary",2,"margin-left","5px","margin-right","9px",3,"nzLoading","click"],["nz-icon","","nzType","save"],[3,"nzValue","nzLabel"],[4,"ngIf"],["nzAlign","center"],["nz-button","","nzType","primary","nzDanger","","nzTooltipTitle","Eliminar","nzTooltipPlacement","topLeft","nz-tooltip","",3,"click"],["style","text-align: center;",4,"ngIf"],[2,"text-align","center"],["nz-icon","","nzType","inbox",2,"font-size","40px"],["nz-button","","nzType","default",3,"click"],["nz-icon","","nzType","plus"],["nz-button","","nzType","primary","nzTooltipTitle","Editar","nzTooltipPlacement","topLeft","nz-tooltip","",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"]],template:function(e,t){if(1&e&&(u.Ub(0,"form",0),u.Ub(1,"div",1),u.Ub(2,"div",2),u.Ub(3,"nz-form-item"),u.Ub(4,"nz-form-label",3),u.Hc(5,"Supervisor"),u.Tb(),u.Ub(6,"nz-form-control",4),u.Ub(7,"nz-select",5),u.Fc(8,le,1,2,"nz-option",6),u.Tb(),u.Fc(9,ue,1,1,"ng-template",null,7,u.Gc),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(11,"div",1),u.Ub(12,"div",2),u.Ub(13,"nz-form-item"),u.Ub(14,"nz-form-label",8),u.Hc(15,"Fecha Inicio"),u.Tb(),u.Ub(16,"nz-form-control",4),u.Pb(17,"nz-date-picker",9),u.Tb(),u.Tb(),u.Tb(),u.Ub(18,"div",2),u.Ub(19,"nz-form-item"),u.Ub(20,"nz-form-label",10),u.Hc(21,"Fecha Fin"),u.Tb(),u.Ub(22,"nz-form-control",4),u.Pb(23,"nz-date-picker",11),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(24,"div",1),u.Ub(25,"div",2),u.Ub(26,"nz-form-item"),u.Ub(27,"nz-form-label",12),u.Hc(28,"Costo por km"),u.Tb(),u.Ub(29,"nz-form-control",13),u.Ub(30,"nz-input-group",14),u.Ub(31,"input",15),u.bc("blur",function(e){return t.onBlurCostKilometer(e.target.value)}),u.Tb(),u.Fc(32,me,1,1,"ng-template",null,16,u.Gc),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(34,"div",2),u.Ub(35,"nz-form-item"),u.Ub(36,"nz-form-label",17),u.Hc(37,"Km Recorrido"),u.Tb(),u.Ub(38,"nz-form-control",13),u.Ub(39,"input",18),u.bc("blur",function(e){return t.onBlurKilometerTraveled(e.target.value)}),u.Tb(),u.Fc(40,pe,1,1,"ng-template",null,19,u.Gc),u.Tb(),u.Tb(),u.Tb(),u.Ub(42,"div",2),u.Ub(43,"nz-form-item"),u.Ub(44,"nz-form-label",20),u.Hc(45,"Costo Recorrido"),u.Tb(),u.Ub(46,"nz-form-control"),u.Ub(47,"nz-input-group",14),u.Pb(48,"input",21),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(49,"div",1),u.Ub(50,"div",2),u.Ub(51,"nz-form-item"),u.Ub(52,"nz-form-label",22),u.Hc(53,"Detalle Actividad"),u.Tb(),u.Ub(54,"nz-form-control",4),u.Pb(55,"textarea",23),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(56,"nz-card",24),u.Ub(57,"div",1),u.Ub(58,"div",2),u.Ub(59,"nz-form-item"),u.Ub(60,"nz-form-label",25),u.Hc(61,"Gasto Fabricaci\xf3n"),u.Tb(),u.Ub(62,"nz-form-control",4),u.Ub(63,"nz-select",26),u.bc("ngModelChange",function(e){return t.onChangeddlmanufacturingexpense(e)}),u.Fc(64,he,1,2,"nz-option",6),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(65,"div",2),u.Ub(66,"nz-form-item"),u.Ub(67,"nz-form-label",27),u.Hc(68,"Tipo Gasto Fabricaci\xf3n"),u.Tb(),u.Ub(69,"nz-form-control",4),u.Ub(70,"nz-select",28),u.Fc(71,ve,1,2,"nz-option",6),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(72,"div",29),u.Ub(73,"nz-table",30),u.Ub(74,"thead"),u.Ub(75,"tr"),u.Ub(76,"th",31),u.Hc(77,"T\xe9cnico"),u.Tb(),u.Ub(78,"th",31),u.Hc(79,"T\xe9lefono"),u.Tb(),u.Ub(80,"th",31),u.Hc(81,"Costo"),u.Tb(),u.Ub(82,"th",31),u.Hc(83,"Horas"),u.Tb(),u.Ub(84,"th",31),u.Hc(85,"Importe"),u.Tb(),u.Pb(86,"th",32),u.Tb(),u.Tb(),u.Ub(87,"tbody"),u.Fc(88,fe,17,14,"tr",33),u.Tb(),u.Tb(),u.Fc(89,ze,1,1,"ng-template",null,34,u.Gc),u.Tb(),u.Fc(91,ge,3,0,"ng-template",null,35,u.Gc),u.Tb(),u.Ub(93,"nz-card",36),u.Ub(94,"div",29),u.Ub(95,"nz-table",30),u.Ub(96,"thead"),u.Ub(97,"tr"),u.Ub(98,"th",31),u.Hc(99,"Tipo Comprobante"),u.Tb(),u.Ub(100,"th",31),u.Hc(101,"N\xfamero Documento"),u.Tb(),u.Ub(102,"th",31),u.Hc(103,"F. Compra"),u.Tb(),u.Ub(104,"th",31),u.Hc(105,"Proveedor"),u.Tb(),u.Ub(106,"th",31),u.Hc(107,"Gasto Fabricaci\xf3n"),u.Tb(),u.Ub(108,"th",31),u.Hc(109,"Tipo Gasto Fabricaci\xf3n"),u.Tb(),u.Ub(110,"th",31),u.Hc(111,"Sub Tipo Gasto Fabricaci\xf3n"),u.Tb(),u.Ub(112,"th",31),u.Hc(113,"Consumible"),u.Tb(),u.Ub(114,"th",31),u.Hc(115,"Costo"),u.Tb(),u.Ub(116,"th",31),u.Hc(117,"Cantidad"),u.Tb(),u.Ub(118,"th",31),u.Hc(119,"Importe"),u.Tb(),u.Pb(120,"th",32),u.Pb(121,"th",32),u.Tb(),u.Tb(),u.Ub(122,"tbody"),u.Fc(123,Se,33,21,"tr",33),u.Tb(),u.Tb(),u.Fc(124,Ae,1,1,"ng-template",null,37,u.Gc),u.Tb(),u.Fc(126,Ee,3,0,"ng-template",null,38,u.Gc),u.Tb(),u.Ub(128,"nz-card",39),u.Ub(129,"div",29),u.Ub(130,"nz-table",30),u.Ub(131,"thead"),u.Ub(132,"tr"),u.Ub(133,"th",31),u.Hc(134,"Tipo Comprobante"),u.Tb(),u.Ub(135,"th",31),u.Hc(136,"N\xfamero Documento"),u.Tb(),u.Ub(137,"th",31),u.Hc(138,"F. Servicio"),u.Tb(),u.Ub(139,"th",31),u.Hc(140,"Proveedor"),u.Tb(),u.Ub(141,"th",31),u.Hc(142,"Gasto Fabricaci\xf3n"),u.Tb(),u.Ub(143,"th",31),u.Hc(144,"Tipo Gasto Fabricaci\xf3n"),u.Tb(),u.Ub(145,"th",31),u.Hc(146,"Sub Tipo Gasto Fabricaci\xf3n"),u.Tb(),u.Ub(147,"th",31),u.Hc(148,"Descripci\xf3n"),u.Tb(),u.Ub(149,"th",31),u.Hc(150,"Monto"),u.Tb(),u.Pb(151,"th",32),u.Pb(152,"th",32),u.Tb(),u.Tb(),u.Ub(153,"tbody"),u.Fc(154,Ue,27,15,"tr",33),u.Tb(),u.Tb(),u.Fc(155,Ne,1,1,"ng-template",null,40,u.Gc),u.Tb(),u.Fc(157,Ce,3,0,"ng-template",null,41,u.Gc),u.Tb(),u.Ub(159,"div",1),u.Ub(160,"div",2),u.Ub(161,"div",42),u.Ub(162,"button",43),u.bc("click",function(){return t.onCancel()}),u.Pb(163,"i",44),u.Hc(164," Cancelar "),u.Tb(),u.Ub(165,"button",45),u.bc("click",function(){return t.onSubmit()}),u.Pb(166,"i",46),u.Hc(167,"Guardar"),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb()),2&e){const e=u.uc(10),n=u.uc(33),i=u.uc(41),r=u.uc(90),a=u.uc(92),c=u.uc(125),o=u.uc(127),s=u.uc(156),l=u.uc(158);u.mc("formGroup",t.frmTemplateActivity),u.Ab(2),u.mc("nzSm",24)("nzXs",24),u.Ab(5),u.mc("nzMaxTagCount",2)("nzMaxTagPlaceholder",e),u.Ab(1),u.mc("ngForOf",t.supervisorList),u.Ab(4),u.mc("nzSm",12)("nzXs",24),u.Ab(5),u.mc("nzFormat",t.dateFormat),u.Ab(1),u.mc("nzSm",12)("nzXs",24),u.Ab(5),u.mc("nzFormat",t.dateFormat),u.Ab(2),u.mc("nzSm",6)("nzXs",24),u.Ab(4),u.mc("nzErrorTip",n),u.Ab(5),u.mc("nzSm",6)("nzXs",24),u.Ab(4),u.mc("nzErrorTip",i),u.Ab(4),u.mc("nzSm",6)("nzXs",24),u.Ab(8),u.mc("nzSm",24)("nzXs",24),u.Ab(6),u.mc("nzExtra",a),u.Ab(2),u.mc("nzSm",8)("nzXs",24),u.Ab(6),u.mc("ngForOf",t.manufacturingExpenseList),u.Ab(1),u.mc("nzSm",8)("nzXs",24),u.Ab(6),u.mc("ngForOf",t.typeManufacturingExpenseList),u.Ab(2),u.mc("nzFrontPagination",!1)("nzNoResult",r)("nzData",t.tableServiceTechnical),u.Ab(3),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center")("nzWidth","20px"),u.Ab(2),u.mc("ngForOf",t.tableServiceTechnical),u.Ab(5),u.mc("nzExtra",o),u.Ab(2),u.mc("nzFrontPagination",!1)("nzNoResult",c)("nzData",t.tableServiceConsumable),u.Ab(3),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center")("nzWidth","20px"),u.Ab(1),u.mc("nzAlign","center")("nzWidth","20px"),u.Ab(2),u.mc("ngForOf",t.tableServiceConsumable),u.Ab(5),u.mc("nzExtra",l),u.Ab(2),u.mc("nzFrontPagination",!1)("nzNoResult",s)("nzData",t.tableServiceProvider),u.Ab(3),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center"),u.Ab(2),u.mc("nzAlign","center")("nzWidth","20px"),u.Ab(1),u.mc("nzAlign","center")("nzWidth","20px"),u.Ab(2),u.mc("ngForOf",t.tableServiceProvider),u.Ab(6),u.mc("nzSm",24)("nzXs",24),u.Ab(5),u.mc("nzLoading",t.loadingSubmit)}},directives:[s.r,s.n,p.b,s.i,h.c,h.a,p.c,p.d,p.a,x.d,s.m,s.h,N.m,C.b,z.a,v.c,v.b,s.d,I.a,ee.c,ee.j,ee.k,ee.b,ee.i,ee.a,ee.f,f.a,T.a,oe.a,x.a,N.n,se.d],pipes:[te.a,N.e],styles:[""]}),e})();function Fe(e,t){if(1&e&&u.Pb(0,"nz-option",25),2&e){const e=t.$implicit;u.mc("nzValue",e.supervisorId)("nzLabel",e.fullName)}}function Pe(e,t){1&e&&u.Hc(0),2&e&&u.Jc(" and ",t.$implicit.length," more selected ")}function Me(e,t){if(1&e&&u.Pb(0,"nz-option",25),2&e){const e=t.$implicit;u.mc("nzValue",e.customerId)("nzLabel",e.businessName)}}function Ve(e,t){if(1&e&&u.Pb(0,"nz-option",25),2&e){const e=t.$implicit;u.mc("nzValue",e.serviceTypeId)("nzLabel",e.serviceTypeName)}}function Le(e,t){if(1&e){const e=u.Vb();u.Ub(0,"div"),u.Hc(1),u.Ub(2,"i",29),u.bc("click",function(){u.vc(e);const t=u.ec().$implicit;return u.ec().onCloseTab(t)}),u.Tb(),u.Tb()}if(2&e){const e=u.ec().$implicit;u.Ab(1),u.Jc(" ",e.activityName," ")}}function Oe(e,t){if(1&e&&(u.Ub(0,"nz-tab",26),u.Fc(1,Le,3,1,"ng-template",null,27,u.Gc),u.Pb(3,"app-template-activity",28),u.Tb()),2&e){const e=u.uc(2),t=u.ec();u.mc("nzTitle",e),u.Ab(3),u.mc("tab",t.tabsList)("serviceId",t.serviceId)("tabIndex",t.tabIndex)}}function He(e,t){if(1&e){const e=u.Vb();u.Ub(0,"button",30),u.bc("click",function(){return u.vc(e),u.ec().onOpenAddActivityModal()}),u.Pb(1,"i",31),u.Hc(2," Agregar"),u.Tb()}}const Re=[{path:"",component:(()=>{class e{constructor(e,t,n,i,r,a,o){this.fb=e,this.activatedRoute=t,this.router=n,this.modalMessage=i,this.messageService=r,this.lontecService=a,this.modalService=o,this.loadingServiceSping=!1,this.dateFormat=c.a.FORMATS.DATE,this.customerList=[],this.serviceTypeList=[],this.supervisorList=[],this.serviceSupervisorList=[],this.serviceActivityList=[],this.tabsList=[],this.tabIndex=0}ngOnInit(){return Object(a.a)(this,void 0,void 0,function*(){this.activatedRoute.paramMap.subscribe(e=>{this.serviceId=Number(e.get("serviceId")),this.initForm(),this.initList()})})}initForm(){this.frmServiceActivity=this.fb.group({ddlsupervisor:[null],ddlcustomer:[null],ddlservicetype:[null],startdate:[null],enddate:[null],description:[null]})}initList(){this.loadingServiceSping=!0,Object(o.a)([this.lontecService.getSupervisorSearch({state:c.a.STATE_ENTITY.ENABLE}),this.lontecService.getCustomerSearch({state:c.a.STATE_ENTITY.ENABLE}),this.lontecService.getServiceTypeSearch({state:c.a.STATE_ENTITY.ENABLE}),this.lontecService.getServiceById(this.serviceId),this.lontecService.getServiceSupervisorSearch({serviceId:this.serviceId}),this.lontecService.getServiceActivitySearch({serviceId:this.serviceId})]).subscribe(e=>{this.supervisorList=e[0],this.customerList=e[1],this.serviceTypeList=e[2],this.service=e[3],this.serviceSupervisorList=e[4],this.serviceActivityList=e[5]},e=>{this.loadingServiceSping=!1,this.modalMessage.error(c.a.MESSAGE.ERROR_GET_DATA)},()=>{this.supervisorList.forEach(e=>{e.fullName=e.firstName+" "+e.secondName+" "+e.fatherLastName+" "+e.motherLastName}),this.setServiceValue()})}setServiceValue(){var e,t,n,i,r,a;null===(e=this.frmServiceActivity.controls.ddlsupervisor)||void 0===e||e.setValue(this.serviceSupervisorList.map(e=>e.supervisorId)),null===(t=this.frmServiceActivity.controls.ddlcustomer)||void 0===t||t.setValue(this.service.customerId),null===(n=this.frmServiceActivity.controls.ddlservicetype)||void 0===n||n.setValue(this.service.serviceTypeId),null===(i=this.frmServiceActivity.controls.startdate)||void 0===i||i.setValue(this.service.startDate),null===(r=this.frmServiceActivity.controls.enddate)||void 0===r||r.setValue(this.service.endDate),null===(a=this.frmServiceActivity.controls.description)||void 0===a||a.setValue(this.service.description),this.frmServiceActivity.controls.ddlsupervisor.disable(),this.frmServiceActivity.controls.ddlcustomer.disable(),this.frmServiceActivity.controls.ddlservicetype.disable(),this.frmServiceActivity.controls.startdate.disable(),this.frmServiceActivity.controls.enddate.disable(),this.frmServiceActivity.controls.description.disable(),this.serviceActivityList.forEach(e=>{this.tabsList.push({activityName:e.serviceActivityName,index:Math.random(),serviceId:this.serviceId,serviceActivityId:e.serviceActivityId})}),this.loadingServiceSping=!1}onOpenAddActivityModal(){this.modalService.create({nzTitle:c.a.MODAL_TITLE.ADD_ACTIVITY,nzClosable:!1,nzContent:S,nzComponentParams:{}}).afterClose.subscribe(e=>{void 0!==e&&(this.tabsList.push({activityName:e.activityName,index:e.index,serviceId:this.serviceId,serviceActivityId:0}),this.tabIndex=this.tabsList.length-1)})}onSelectedTab(e){var t;this.tabIndex=null===(t=e[0])||void 0===t?void 0:t.index}onCloseTab(e){this.modalMessage.confirm(c.a.MESSAGE.CONFIRM_QUESTION,()=>{let t=Number(e.serviceActivityId);this.lontecService.deleteServiceActivityById(t).subscribe(()=>{this.modalMessage.success(c.a.MESSAGE.SUCCESS_SAVE);let t=this.tabsList.findIndex(t=>t.activityName==e.activityName);this.tabsList.splice(t,1)},e=>{this.modalMessage.error(c.a.MESSAGE.ERROR)})})}}return e.\u0275fac=function(t){return new(t||e)(u.Ob(s.e),u.Ob(r.a),u.Ob(r.d),u.Ob(y.a),u.Ob(d.e),u.Ob(A.a),u.Ob(b.d))},e.\u0275cmp=u.Ib({type:e,selectors:[["app-service-activity"]],decls:56,vars:26,consts:[["nz-form","","nzLayout","vertical",3,"formGroup"],["nzHeader","Datos Servicio",3,"nzActive"],[3,"nzSpinning"],["nz-row",""],["nz-col","",3,"nzSm","nzXs"],["nzRequired","","nzFor","supervisor"],["nzErrorTip","Campo obligatorio."],["nzShowSearch","","formControlName","ddlsupervisor","nzPlaceHolder","Supervisor","nzMode","multiple",3,"nzMaxTagCount","nzMaxTagPlaceholder"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["tagPlaceHolder",""],["nzRequired","","nzFor","customer"],["nzShowSearch","","formControlName","ddlcustomer","nzPlaceHolder","Cliente"],["nzRequired","","nzFor","servicetype"],["nzShowSearch","","formControlName","ddlservicetype","nzPlaceHolder","Tipo Servicio"],["nzRequired","","nzFor","startdate"],["formControlName","startdate","nzPlaceHolder","Fecha Inicio",3,"nzFormat"],["nzFor","enddate"],["formControlName","enddate","nzPlaceHolder","Fecha Fin",3,"nzFormat"],["nzRequired","","nzFor","description"],["nz-input","","formControlName","description","placeholder","Detalle del Servicio"],["nzHeader","Actividades",3,"nzActive"],["nzTitle","Actividades de Servicio",3,"nzExtra"],[3,"nzSelectedIndex","nzSelectChange"],[3,"nzTitle",4,"ngFor","ngForOf"],["AddButtonServiceActivity",""],[3,"nzValue","nzLabel"],[3,"nzTitle"],["titleTemplate",""],[3,"tab","serviceId","tabIndex"],["nz-icon","","nzType","close",3,"click"],["nz-button","","nzType","default",3,"click"],["nz-icon","","nzType","plus"]],template:function(e,t){if(1&e&&(u.Ub(0,"form",0),u.Ub(1,"nz-collapse"),u.Ub(2,"nz-collapse-panel",1),u.Ub(3,"nz-spin",2),u.Ub(4,"div",3),u.Ub(5,"div",4),u.Ub(6,"nz-form-item"),u.Ub(7,"nz-form-label",5),u.Hc(8,"Supervisor"),u.Tb(),u.Ub(9,"nz-form-control",6),u.Ub(10,"nz-select",7),u.Fc(11,Fe,1,2,"nz-option",8),u.Tb(),u.Fc(12,Pe,1,1,"ng-template",null,9,u.Gc),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(14,"div",3),u.Ub(15,"div",4),u.Ub(16,"nz-form-item"),u.Ub(17,"nz-form-label",10),u.Hc(18,"Cliente"),u.Tb(),u.Ub(19,"nz-form-control",6),u.Ub(20,"nz-select",11),u.Fc(21,Me,1,2,"nz-option",8),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(22,"div",3),u.Ub(23,"div",4),u.Ub(24,"nz-form-item"),u.Ub(25,"nz-form-label",12),u.Hc(26,"Tipo Servicio"),u.Tb(),u.Ub(27,"nz-form-control",6),u.Ub(28,"nz-select",13),u.Fc(29,Ve,1,2,"nz-option",8),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(30,"div",3),u.Ub(31,"div",4),u.Ub(32,"nz-form-item"),u.Ub(33,"nz-form-label",14),u.Hc(34,"Fecha Inicio"),u.Tb(),u.Ub(35,"nz-form-control",6),u.Pb(36,"nz-date-picker",15),u.Tb(),u.Tb(),u.Tb(),u.Ub(37,"div",4),u.Ub(38,"nz-form-item"),u.Ub(39,"nz-form-label",16),u.Hc(40,"Fecha Fin"),u.Tb(),u.Ub(41,"nz-form-control",6),u.Pb(42,"nz-date-picker",17),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(43,"div",3),u.Ub(44,"div",4),u.Ub(45,"nz-form-item"),u.Ub(46,"nz-form-label",18),u.Hc(47,"Detalle"),u.Tb(),u.Ub(48,"nz-form-control",6),u.Pb(49,"textarea",19),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(50,"nz-collapse-panel",20),u.Ub(51,"nz-card",21),u.Ub(52,"nz-tabset",22),u.bc("nzSelectChange",function(e){return t.onSelectedTab([e])}),u.Fc(53,Oe,4,4,"nz-tab",23),u.Tb(),u.Fc(54,He,3,0,"ng-template",null,24,u.Gc),u.Tb(),u.Tb(),u.Tb(),u.Tb()),2&e){const e=u.uc(13),n=u.uc(55);u.mc("formGroup",t.frmServiceActivity),u.Ab(2),u.mc("nzActive",!0),u.Ab(1),u.mc("nzSpinning",t.loadingServiceSping),u.Ab(2),u.mc("nzSm",24)("nzXs",24),u.Ab(5),u.mc("nzMaxTagCount",2)("nzMaxTagPlaceholder",e),u.Ab(1),u.mc("ngForOf",t.supervisorList),u.Ab(4),u.mc("nzSm",24)("nzXs",24),u.Ab(6),u.mc("ngForOf",t.customerList),u.Ab(2),u.mc("nzSm",24)("nzXs",24),u.Ab(6),u.mc("ngForOf",t.serviceTypeList),u.Ab(2),u.mc("nzSm",12)("nzXs",24),u.Ab(5),u.mc("nzFormat",t.dateFormat),u.Ab(1),u.mc("nzSm",12)("nzXs",24),u.Ab(5),u.mc("nzFormat",t.dateFormat),u.Ab(2),u.mc("nzSm",24)("nzXs",24),u.Ab(6),u.mc("nzActive",!0),u.Ab(1),u.mc("nzExtra",n),u.Ab(1),u.mc("nzSelectedIndex",t.tabIndex),u.Ab(1),u.mc("ngForOf",t.tabsList)}},directives:[s.r,s.n,p.b,s.i,E.a,E.c,U.a,h.c,h.a,p.c,p.d,p.a,x.d,s.m,s.h,N.m,C.b,v.b,s.d,I.a,F.b,x.a,F.a,Ie,z.a,oe.a,f.a,T.a],styles:[""]}),e})()}];let qe=(()=>{class e{}return e.\u0275mod=u.Mb({type:e}),e.\u0275inj=u.Lb({factory:function(t){return new(t||e)},imports:[[r.g.forChild(Re)],r.g]}),e})(),De=(()=>{class e{}return e.\u0275mod=u.Mb({type:e}),e.\u0275inj=u.Lb({factory:function(t){return new(t||e)},imports:[[i.a,qe]]}),e})()}}]);