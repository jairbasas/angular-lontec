(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{tpX8:function(n,e,t){"use strict";t.r(e),t.d(e,"TechnicalModule",function(){return w});var i=t("NdbC"),o=t("iInd"),a=t("36fG"),r=t("cp0P"),c=t("s7LF"),l=t("Ez0L"),b=t("8Y7J"),s=t("NFMk"),m=t("JXeA"),d=t("vU8h"),h=t("nsZx"),u=t("fXYU"),z=t("wf2+"),T=t("fb/r"),p=t("tYkK"),f=t("px0D"),g=t("jTf7"),S=t("SVse"),A=t("WJhm"),U=t("GaVp"),E=t("Jp/u");function v(n,e){if(1&n&&b.Pb(0,"nz-option",26),2&n){const n=e.$implicit;b.mc("nzValue",n.parameterDetailId)("nzLabel",n.fieldValue1)}}function y(n,e){1&n&&(b.Sb(0),b.Hc(1," Campo obligatorio. "),b.Rb())}function P(n,e){1&n&&(b.Sb(0),b.Hc(1," Debe ingresar s\xf3lo n\xfameros. "),b.Rb())}function I(n,e){if(1&n&&(b.Fc(0,y,2,0,"ng-container",27),b.Fc(1,P,2,0,"ng-container",27)),2&n){const n=e.$implicit;b.mc("ngIf",n.hasError("required")),b.Ab(1),b.mc("ngIf",!n.hasError("required")&&n.hasError("validateAmount"))}}function N(n,e){if(1&n){const n=b.Vb();b.Ub(0,"div"),b.Ub(1,"button",28),b.bc("click",function(){return b.vc(n),b.ec().onCancel()}),b.Hc(2,"Cancelar"),b.Tb(),b.Ub(3,"button",29),b.bc("click",function(){return b.vc(n),b.ec().onSubmit()}),b.Hc(4,"Guardar"),b.Tb(),b.Tb()}if(2&n){const n=b.ec();b.Ab(3),b.mc("nzLoading",n.loadingSubmit)}}let C=(()=>{class n{constructor(n,e,t,i,o,r){this.fb=n,this.modalRef=e,this.messageService=t,this.modalMessage=i,this.lontecService=o,this.formValidator=r,this.state=a.a.STATE_ENTITY.ENABLE,this.loadingSubmit=!1,this.loadingSping=!1,this.identityDocumentTypeList=[]}ngOnInit(){this.initForm(),this.initList()}initForm(){this.frmTechnicalEdit=this.fb.group({firstname:[null,[c.q.required,this.formValidator.espacionBlanco]],secondname:[null],fatherlastname:[null,[c.q.required,this.formValidator.espacionBlanco]],motherlastname:[null],ddlidentitydocumenttype:[null],documentnumber:[null],phonenumber:[null],cost:[null,[c.q.required,this.formValidator.validateAmount]]})}initList(){Object(r.a)([this.lontecService.getParameterDetailSearch({parameterId:a.a.PARAMETERS.IDENTITY_DOCUMENT_TYPE})]).subscribe(n=>{this.identityDocumentTypeList=n[0]},n=>{this.modalMessage.error(a.a.MESSAGE.ERROR_GET_DATA)},()=>{void 0!==this.technicalId&&this.onSearch()})}onBlurCost(n){isNaN(n)||""===n||this.frmTechnicalEdit.get("cost").setValue(Object(l.i)(n))}onSearch(){this.loadingSping=!0,this.lontecService.getTechnicalById(this.technicalId).subscribe(n=>{var e,t,i,o,a,r,c,b;null===(e=this.frmTechnicalEdit.get("firstname"))||void 0===e||e.setValue(n.firstName),null===(t=this.frmTechnicalEdit.get("secondname"))||void 0===t||t.setValue(n.secondName),null===(i=this.frmTechnicalEdit.get("fatherlastname"))||void 0===i||i.setValue(n.fatherLastName),null===(o=this.frmTechnicalEdit.get("motherlastname"))||void 0===o||o.setValue(n.motherLastName),null===(a=this.frmTechnicalEdit.get("ddlidentitydocumenttype"))||void 0===a||a.setValue(n.identityDocumentTypeId),null===(r=this.frmTechnicalEdit.get("documentnumber"))||void 0===r||r.setValue(n.documentNumber),null===(c=this.frmTechnicalEdit.get("phonenumber"))||void 0===c||c.setValue(n.phoneNumber),null===(b=this.frmTechnicalEdit.get("cost"))||void 0===b||b.setValue(Object(l.i)(n.cost)),this.state=Number(n.state),this.loadingSping=!1},n=>{this.loadingSping=!1,this.modalMessage.error(a.a.MESSAGE.ERROR_GET_DATA)})}setCommand(){return{technicalId:this.technicalId,firstName:this.frmTechnicalEdit.value.firstname,secondName:this.frmTechnicalEdit.value.secondname,fatherLastName:this.frmTechnicalEdit.value.fatherlastname,motherLastName:this.frmTechnicalEdit.value.motherlastname,documentNumber:this.frmTechnicalEdit.value.documentnumber,phoneNumber:this.frmTechnicalEdit.value.phonenumber,cost:this.frmTechnicalEdit.value.cost,identityDocumentTypeId:this.frmTechnicalEdit.value.ddlidentitydocumenttype,state:this.state,registerUserId:Object(l.d)(),registerUserFullname:Object(l.c)()}}onCancel(){this.modalRef.destroy({refresh:!1})}onSubmit(){Object(l.j)(this.frmTechnicalEdit)?this.modalMessage.confirm(a.a.MESSAGE.CONFIRM_QUESTION,()=>{this.loadingSubmit=!0,this.lontecService.postTechnical(this.setCommand()).subscribe(()=>{this.loadingSubmit=!1,this.messageService.success(a.a.MESSAGE.SUCCESS_SAVE),this.modalRef.destroy({refresh:!0})},n=>{this.loadingSubmit=!1,this.modalMessage.error(a.a.MESSAGE.ERROR)})}):this.messageService.warning(a.a.MESSAGE.COMPLETE_FORM)}}return n.\u0275fac=function(e){return new(e||n)(b.Ob(c.e),b.Ob(s.c),b.Ob(m.e),b.Ob(d.a),b.Ob(h.a),b.Ob(u.a))},n.\u0275cmp=b.Ib({type:n,selectors:[["app-technical-edit"]],inputs:{technicalId:"technicalId"},decls:59,vars:20,consts:[["nz-form","","nzLayout","vertical",3,"formGroup"],[3,"nzSpinning"],["nz-row",""],["nz-col","",3,"nzSm","nzXs"],["nzRequired","","nzFor","firstname"],["nzErrorTip","Campo obligatorio."],["nz-input","","formControlName","firstname","placeholder","Primer Nombre"],["nzRequired","","nzFor","secondname"],["nz-input","","formControlName","secondname","placeholder","Segundo Nombre"],["nzRequired","","nzFor","fatherlastname"],["nz-input","","formControlName","fatherlastname","placeholder","Apellido Paterno"],["nzFor","motherlastname"],["nz-input","","formControlName","motherlastname","placeholder","Apellido Materno"],["nzFor","identitydocumenttype"],["nzShowSearch","","nzAllowClear","","formControlName","ddlidentitydocumenttype","nzPlaceHolder","Tipo Documento"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzFor","documentnumber"],["nz-input","","formControlName","documentnumber","placeholder","N\xfamero Documento"],["nzFor","phonenumber"],["nz-input","","formControlName","phonenumber","placeholder","Tel\xe9fono"],["nzRequired","","nzFor","cost"],[3,"nzErrorTip"],["nzAddOnBefore","S./"],["nz-input","","formControlName","cost","placeholder","Costo",1,"input-group",3,"blur"],["customValidatorCost",""],[4,"nzModalFooter"],[3,"nzValue","nzLabel"],[4,"ngIf"],["nz-button","","nzType","primary","nzDanger","",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(n,e){if(1&n&&(b.Ub(0,"form",0),b.Ub(1,"nz-spin",1),b.Ub(2,"div",2),b.Ub(3,"div",3),b.Ub(4,"nz-form-item"),b.Ub(5,"nz-form-label",4),b.Hc(6,"Primer Nombre"),b.Tb(),b.Ub(7,"nz-form-control",5),b.Pb(8,"input",6),b.Tb(),b.Tb(),b.Tb(),b.Ub(9,"div",3),b.Ub(10,"nz-form-item"),b.Ub(11,"nz-form-label",7),b.Hc(12,"Segundo Nombre"),b.Tb(),b.Ub(13,"nz-form-control",5),b.Pb(14,"input",8),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(15,"div",2),b.Ub(16,"div",3),b.Ub(17,"nz-form-item"),b.Ub(18,"nz-form-label",9),b.Hc(19,"Apellido Paterno"),b.Tb(),b.Ub(20,"nz-form-control",5),b.Pb(21,"input",10),b.Tb(),b.Tb(),b.Tb(),b.Ub(22,"div",3),b.Ub(23,"nz-form-item"),b.Ub(24,"nz-form-label",11),b.Hc(25,"Apellido Materno"),b.Tb(),b.Ub(26,"nz-form-control",5),b.Pb(27,"input",12),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(28,"div",2),b.Ub(29,"div",3),b.Ub(30,"nz-form-item"),b.Ub(31,"nz-form-label",13),b.Hc(32,"Tipo Documento"),b.Tb(),b.Ub(33,"nz-form-control"),b.Ub(34,"nz-select",14),b.Fc(35,v,1,2,"nz-option",15),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(36,"div",3),b.Ub(37,"nz-form-item"),b.Ub(38,"nz-form-label",16),b.Hc(39,"N\xfamero Documento"),b.Tb(),b.Ub(40,"nz-form-control",5),b.Pb(41,"input",17),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(42,"div",2),b.Ub(43,"div",3),b.Ub(44,"nz-form-item"),b.Ub(45,"nz-form-label",18),b.Hc(46,"Tel\xe9fono"),b.Tb(),b.Ub(47,"nz-form-control",5),b.Pb(48,"input",19),b.Tb(),b.Tb(),b.Tb(),b.Ub(49,"div",3),b.Ub(50,"nz-form-item"),b.Ub(51,"nz-form-label",20),b.Hc(52,"Costo"),b.Tb(),b.Ub(53,"nz-form-control",21),b.Ub(54,"nz-input-group",22),b.Ub(55,"input",23),b.bc("blur",function(n){return e.onBlurCost(n.target.value)}),b.Tb(),b.Fc(56,I,2,2,"ng-template",null,24,b.Gc),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Fc(58,N,5,1,"div",25)),2&n){const n=b.uc(57);b.mc("formGroup",e.frmTechnicalEdit),b.Ab(1),b.mc("nzSpinning",e.loadingSping),b.Ab(2),b.mc("nzSm",12)("nzXs",12),b.Ab(6),b.mc("nzSm",12)("nzXs",12),b.Ab(7),b.mc("nzSm",12)("nzXs",12),b.Ab(6),b.mc("nzSm",12)("nzXs",12),b.Ab(7),b.mc("nzSm",12)("nzXs",12),b.Ab(6),b.mc("ngForOf",e.identityDocumentTypeList),b.Ab(1),b.mc("nzSm",12)("nzXs",12),b.Ab(7),b.mc("nzSm",12)("nzXs",12),b.Ab(6),b.mc("nzSm",12)("nzXs",12),b.Ab(4),b.mc("nzErrorTip",n)}},directives:[c.r,c.n,z.b,c.i,T.a,p.c,p.a,z.c,z.d,z.a,f.b,c.d,c.m,c.h,g.d,S.m,A.a,f.c,s.a,g.a,S.n,U.a,E.a],styles:[""]}),n})();var L=t("YdS3"),F=t("66zS"),O=t("haRT"),R=t("W4B1"),D=t("UZXO");function M(n,e){if(1&n&&b.Pb(0,"nz-option",20),2&n){const n=e.$implicit;b.mc("nzValue",n.parameterDetailId)("nzLabel",n.fieldValue1)}}function H(n,e){1&n&&(b.Ub(0,"button",26),b.Pb(1,"i",27),b.Tb())}function V(n,e){1&n&&(b.Ub(0,"button",28),b.Pb(1,"i",29),b.Tb())}function G(n,e){if(1&n){const n=b.Vb();b.Ub(0,"tr"),b.Ub(1,"td",21),b.Hc(2),b.Tb(),b.Ub(3,"td",21),b.Hc(4),b.Tb(),b.Ub(5,"td",21),b.Hc(6),b.Tb(),b.Ub(7,"td",21),b.Hc(8),b.fc(9,"amountFormat"),b.Tb(),b.Ub(10,"td",21),b.Hc(11),b.Tb(),b.Ub(12,"td",21),b.Ub(13,"button",22),b.bc("click",function(){b.vc(n);const t=e.$implicit;return b.ec().onOpenTechnicalEditModal(t.technicalId)}),b.Pb(14,"i",23),b.Tb(),b.Tb(),b.Ub(15,"td",21),b.Fc(16,H,2,0,"button",24),b.Tb(),b.Ub(17,"td",21),b.Fc(18,V,2,0,"button",25),b.Tb(),b.Tb()}if(2&n){const n=e.$implicit,t=b.ec();b.Ab(2),b.Mc("",n.firstName," ",n.secondName," ",n.fatherLastName," ",n.motherLastName,""),b.Ab(2),b.Ic(n.identityDocumentTypeName),b.Ab(2),b.Ic(n.documentNumber),b.Ab(2),b.Ic(b.gc(9,10,n.cost)),b.Ab(3),b.Ic(n.stateName),b.Ab(5),b.mc("ngIf",t.state!==n.state),b.Ab(2),b.mc("ngIf",t.state===n.state)}}const x=[{path:"",component:(()=>{class n{constructor(n,e,t,i){this.fb=n,this.modalMessage=e,this.modalService=t,this.lontecService=i,this.stateList=[],this.state=a.a.STATE_ENTITY.ENABLE,this.pageIndex=a.a.PAGINATION.PAGE_INDEX,this.pageSize=a.a.PAGINATION.PAGE_SIZE,this.sortProperty="",this.sortPropertyName="",this.totalRecord=0,this.tableTechnicalLoading=!1,this.tableTechnical=[]}ngOnInit(){this.initForm(),this.initList()}initForm(){this.frmTechnical=this.fb.group({name:[null],ddlstate:[null]})}initList(){Object(r.a)([this.lontecService.getParameterDetailSearch({parameterId:a.a.PARAMETERS.ENTITY_STATE})]).subscribe(n=>{this.stateList=n[0]},n=>{this.modalMessage.error(a.a.MESSAGE.ERROR_GET_DATA)},()=>{this.onSearch()})}onSearch(){let n=null===this.frmTechnical.value.name?"":this.frmTechnical.value.name,e=null===this.frmTechnical.controls.ddlstate.value?0:this.frmTechnical.controls.ddlstate.value;this.tableTechnicalLoading=!0,this.lontecService.getTechnicalFindAll({name:n,state:e,PageIndex:this.pageIndex,PageSize:this.pageSize,sort:this.sortProperty}).subscribe(n=>{this.tableTechnical=n.items,this.totalRecord=n.pagination.total,this.tableTechnicalLoading=!1},n=>{this.tableTechnicalLoading=!1,this.modalMessage.error(a.a.MESSAGE.ERROR_GET_DATA)})}onQueryParamsChange(n){const{pageSize:e,pageIndex:t,sort:i}=n;let o;this.pageIndex=t,this.pageSize=e,null!==i[0].value&&("ascend"==i[0].value&&(o="ASC"),"descend"==i[0].value&&(o="DESC"),"name"===i[0].key&&(this.sortProperty="first_name "+o)),this.onSearch()}onOpenTechnicalEditModal(n){this.modalService.create({nzTitle:a.a.MODAL_TITLE.REGISTER_TECHNICAL,nzClosable:!1,nzContent:C,nzComponentParams:{technicalId:n}}).afterClose.subscribe(n=>{n.refresh&&this.onSearch()})}}return n.\u0275fac=function(e){return new(e||n)(b.Ob(c.e),b.Ob(d.a),b.Ob(s.d),b.Ob(h.a))},n.\u0275cmp=b.Ib({type:n,selectors:[["app-technical"]],decls:44,vars:27,consts:[["nz-form","","nzLayout","vertical",3,"formGroup"],["nzTitle","T\xe9cnicos"],["nz-row",""],["nz-col","",3,"nzSm","nzXs"],["nzFor","name"],["nz-input","","formControlName","name","placeholder","T\xe9cnico"],["nzFor","ddlstate"],["nzShowSearch","","nzAllowClear","","formControlName","ddlstate","nzPlaceHolder","Estados"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[1,"text-right"],["nz-button","","nzType","primary",2,"margin-left","5px","margin-right","5px",3,"click"],["nz-icon","","nzType","plus"],["nz-button","","nzType","default",2,"margin-left","5px","margin-right","9px",3,"click"],["nz-icon","","nzType","search"],["nz-row","",1,"ant-form-item","mt-15"],["nzSize","small","nzShowSizeChanger","",3,"nzFrontPagination","nzLoading","nzData","nzTotal","nzPageIndex","nzPageSize","nzPageIndexChange","nzPageSizeChange","nzQueryParams"],["nzColumnKey","name",1,"tr-color",3,"nzAlign","nzSortFn"],[1,"tr-color",3,"nzAlign"],[1,"tr-color",3,"nzAlign","nzWidth"],[4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],["nzAlign","center"],["nz-button","","nzType","primary","nzTooltipTitle","Editar","nzTooltipPlacement","topLeft","nz-tooltip","",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-button","","nzTooltipTitle","Habilitar","nzTooltipPlacement","topLeft","nz-tooltip","",4,"ngIf"],["nz-button","","nzTooltipTitle","Deshabilitar","nzTooltipPlacement","topLeft","nz-tooltip","","nzDanger","",4,"ngIf"],["nz-button","","nzTooltipTitle","Habilitar","nzTooltipPlacement","topLeft","nz-tooltip",""],["nz-icon","","nzType","like","nzTheme","outline"],["nz-button","","nzTooltipTitle","Deshabilitar","nzTooltipPlacement","topLeft","nz-tooltip","","nzDanger",""],["nz-icon","","nzType","dislike","nzTheme","outline"]],template:function(n,e){1&n&&(b.Ub(0,"form",0),b.Ub(1,"nz-card",1),b.Ub(2,"div",2),b.Ub(3,"div",3),b.Ub(4,"nz-form-item"),b.Ub(5,"nz-form-label",4),b.Hc(6,"T\xe9cnico"),b.Tb(),b.Ub(7,"nz-form-control"),b.Pb(8,"input",5),b.Tb(),b.Tb(),b.Tb(),b.Ub(9,"div",3),b.Ub(10,"nz-form-item"),b.Ub(11,"nz-form-label",6),b.Hc(12,"Estado"),b.Tb(),b.Ub(13,"nz-form-control"),b.Ub(14,"nz-select",7),b.Fc(15,M,1,2,"nz-option",8),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(16,"div",2),b.Ub(17,"div",3),b.Ub(18,"div",9),b.Ub(19,"button",10),b.bc("click",function(){return e.onOpenTechnicalEditModal()}),b.Pb(20,"i",11),b.Hc(21," Nuevo"),b.Tb(),b.Ub(22,"button",12),b.bc("click",function(){return e.onSearch()}),b.Pb(23,"i",13),b.Hc(24,"Buscar"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(25,"div",14),b.Ub(26,"nz-table",15),b.bc("nzPageIndexChange",function(n){return e.pageIndex=n})("nzPageSizeChange",function(n){return e.pageSize=n})("nzQueryParams",function(n){return e.onQueryParamsChange(n)}),b.Ub(27,"thead"),b.Ub(28,"tr"),b.Ub(29,"th",16),b.Hc(30,"T\xe9cnico"),b.Tb(),b.Ub(31,"th",17),b.Hc(32,"Tipo Documento"),b.Tb(),b.Ub(33,"th",17),b.Hc(34,"N\xfamero Documento"),b.Tb(),b.Ub(35,"th",17),b.Hc(36,"Costo por Hora"),b.Tb(),b.Ub(37,"th",17),b.Hc(38,"Estado"),b.Tb(),b.Pb(39,"th",18),b.Pb(40,"th",18),b.Pb(41,"th",18),b.Tb(),b.Tb(),b.Ub(42,"tbody"),b.Fc(43,G,19,12,"tr",19),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb()),2&n&&(b.mc("formGroup",e.frmTechnical),b.Ab(3),b.mc("nzSm",8)("nzXs",24),b.Ab(6),b.mc("nzSm",8)("nzXs",24),b.Ab(6),b.mc("ngForOf",e.stateList),b.Ab(2),b.mc("nzSm",24)("nzXs",24),b.Ab(9),b.mc("nzFrontPagination",!1)("nzLoading",e.tableTechnicalLoading)("nzData",e.tableTechnical)("nzTotal",e.totalRecord)("nzPageIndex",e.pageIndex)("nzPageSize",e.pageSize),b.Ab(3),b.mc("nzAlign","center")("nzSortFn",!0),b.Ab(2),b.mc("nzAlign","center"),b.Ab(2),b.mc("nzAlign","center"),b.Ab(2),b.mc("nzAlign","center"),b.Ab(2),b.mc("nzAlign","center"),b.Ab(2),b.mc("nzAlign","center")("nzWidth","20px"),b.Ab(1),b.mc("nzAlign","center")("nzWidth","20px"),b.Ab(1),b.mc("nzAlign","center")("nzWidth","20px"),b.Ab(2),b.mc("ngForOf",e.tableTechnical))},directives:[c.r,c.n,z.b,c.i,L.a,p.c,p.a,z.c,z.d,z.a,f.b,c.d,c.m,c.h,g.d,S.m,U.a,E.a,A.a,F.a,O.c,O.j,O.k,O.b,O.i,O.h,O.a,O.f,g.a,R.d,S.n],pipes:[D.a],styles:[""]}),n})()}];let _=(()=>{class n{}return n.\u0275mod=b.Mb({type:n}),n.\u0275inj=b.Lb({factory:function(e){return new(e||n)},imports:[[o.g.forChild(x)],o.g]}),n})(),w=(()=>{class n{}return n.\u0275mod=b.Mb({type:n}),n.\u0275inj=b.Lb({factory:function(e){return new(e||n)},imports:[[i.a,_]]}),n})()}}]);